it("should read highlighted text for Voice Over when editing PDF", async () => {
  const { PDFDocument, PDFPageProxy, AnnotationEditor } = await import("../../src/display/api.js");
  const { Annotation } = await import("../../src/core/annotation.js");

  // Create a test PDF with a highlight annotation
  const pdf = new PDFDocument();
  const page = pdf.addPage();
  const text = "Sample highlighted text";

  // Create and add a highlight annotation
  const annotation = new Annotation({
    type: Annotation.Type.HIGHLIGHT,
    text: text,
    quads: [],
    color: "#FF0000",
    opacity: 0.5
  });

  const editor = new AnnotationEditor({
    annotation: annotation,
    page: page,
    render: () => {}
  });

  editor.render();

  // Check if the highlighted text is accessible
  const highlightDiv = editor.highlightDiv;
  const markElement = highlightDiv.querySelector("mark.visuallyHidden");

  expect(markElement).toBeTruthy();
  expect(markElement.textContent).toBe(text);
  expect(highlightDiv.getAttribute("aria-hidden")).toBe("true");
});
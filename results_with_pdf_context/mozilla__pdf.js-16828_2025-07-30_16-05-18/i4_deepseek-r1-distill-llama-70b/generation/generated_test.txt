it("should paste an image from clipboard in editing mode", async () => {
  const { AnnotationEditorUIManager } = await import("../../src/display/editor/tools.js");
  const { AnnotationEditorLayer } = await import("../../src/display/editor/annotation_editor_layer.js");
  const { JSDOM } = await import("jsdom");

  // Setup mock DOM
  const dom = new JSDOM();
  globalThis.document = dom.window.document;
  globalThis.window = dom.window;

  // Mock clipboard data
  const mockClipboardData = {
    items: [{ kind: "file", type: "image/png", getAsFile: () => new File([""], "mock.png") }],
    getData: () => "mock-image-data"
  };

  // Mock paste event
  const mockEvent = {
    preventDefault: jest.fn(),
    clipboardData: mockClipboardData
  };

  // Create UI manager and layer
  const uiManager = new AnnotationEditorUIManager(null, null, null, null, null);
  const layer = new AnnotationEditorLayer({
    uiManager: uiManager,
    div: document.createElement("div"),
    pageIndex: 0,
    l10n: {},
    accessibilityManager: null,
    annotationLayer: null,
    viewport: null
  });

  // Set up editing mode
  uiManager.updateMode(AnnotationEditorType.STAMP);

  // Dispatch paste event
  document.body.dispatchEvent(new dom.window.CustomEvent("paste", { detail: mockEvent }));

  // Check if editor was added
  expect(layer.isEmpty).toBe(false);
});
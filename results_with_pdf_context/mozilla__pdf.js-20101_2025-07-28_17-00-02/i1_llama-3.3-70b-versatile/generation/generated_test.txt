it("should render text correctly when browserdisplayusedocumentfonts is set to", async () => {
  const { getDocument } = await import('../../src/display/api.js');
  const { buildGetDocumentParams } = await import('./test_utils.js');
  const loadingTask = getDocument(buildGetDocumentParams('issue20065.pdf'));
  const pdfDocument = await loadingTask.promise;
  const pdfPage = await pdfDocument.getPage(1);
  const viewport = pdfPage.getViewport({ scale: 1 });
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  canvas.width = viewport.width;
  canvas.height = viewport.height;
  const renderTask = pdfPage.render({
    canvasContext: ctx,
    viewport,
    enableWebGL: false,
  });
  await renderTask.promise;
  const pixels = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
  let hasNonTransparentPixel = false;
  for (let i = 3; i < pixels.length; i += 4) {
    if (pixels[i] !== 0) {
      hasNonTransparentPixel = true;
      break;
    }
  }
  expect(hasNonTransparentPixel).toBe(true);
});
it("should render text correctly when browserdisplayusedocumentfonts is set to", async () => {
  const { getDocument } = await import('../../src/display/api.js');
  const { buildGetDocumentParams } = await import('./test_utils.js');
  const loadingTask = getDocument(buildGetDocumentParams('issue20065.pdf'));
  const pdfDocument = await loadingTask.promise;
  const pdfPage = await pdfDocument.getPage(1);
  const image = await pdfPage.render({
    viewport: pdfPage.getViewport({ scale: 1 }),
    canvasContext: await import('../../src/display/canvas_factory.js').then(module => module.DOMCanvasFactory),
  });
  const ctx = image.canvas.getContext('2d');
  const pixels = ctx.getImageData(0, 0, image.canvas.width, image.canvas.height).data;
  let hasNonTransparentPixel = false;
  for (let i = 3; i < pixels.length; i += 4) {
    if (pixels[i] !== 0) {
      hasNonTransparentPixel = true;
      break;
    }
  }
  expect(hasNonTransparentPixel).toBe(true);
});
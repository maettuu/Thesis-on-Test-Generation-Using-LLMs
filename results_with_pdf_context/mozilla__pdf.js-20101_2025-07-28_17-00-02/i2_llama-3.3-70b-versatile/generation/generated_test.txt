it("should render text correctly when browserdisplayusedocumentfonts is set to", async () => {
  const { getDocument } = await import('../../src/display/api.js');
  const { buildGetDocumentParams } = await import('./test_utils.js');
  const loadingTask = getDocument(buildGetDocumentParams('issue20065.pdf'));
  const pdfDocument = await loadingTask.promise;
  const pdfPage = await pdfDocument.getPage(1);
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  const renderTask = pdfPage.render({
    canvasContext: ctx,
    viewport: pdfPage.getViewport({ scale: 1 }),
  });
  await renderTask.promise;
  const expectedText = 'Example Text';
  const actualText = ctx.canvas.toDataURL();
  const expectedTextData = new TextDecoder('utf-8').decode(expectedText);
  const actualTextData = ctx.canvas.toDataURL().split(',')[1];
  expect(actualTextData).toContain(expectedTextData);
});
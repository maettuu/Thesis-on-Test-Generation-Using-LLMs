it("should delete selected element when pressing Delete key on macOS", async () => {
  const { AnnotationEditorUIManager, KeyboardManager } = await import("../../src/display/editor/tools.js");
  const { PDFDocument } = await import("../../src/display/api.js");

  const eventBus = {
    _on: jest.fn(),
    _off: jest.fn(),
    dispatch: jest.fn(),
  };

  const pdfDocument = new PDFDocument({
    numPages: 1,
    firstPage: () => ({}),
  });

  const pageColors = {};
  const container = document.createElement("div");

  const manager = new AnnotationEditorUIManager(container, eventBus, pdfDocument, pageColors);
  const editor = {
    id: "test-editor",
    select: jest.fn(),
    unselect: jest.fn(),
    remove: jest.fn(),
    commitOrRemove: jest.fn(),
    isEmpty: jest.fn().mockReturnValue(false),
  };

  manager.addEditor(editor);
  manager.setSelected(editor);

  const event = {
    key: "Delete",
    metaKey: true,
    preventDefault: jest.fn(),
    stopPropagation: jest.fn(),
  };

  manager.keydown(event);

  expect(editor.remove).toHaveBeenCalled();
});
it("should return valid URLs for alpha and luminosity SMask filters", async () => {
  const { DOMFilterFactory } = await import("../../src/display/display_utils.js");
  const factory = new DOMFilterFactory({ docId: 1 });
  const map = Array.from({ length: 256 }, (_, i) => i);
  const alphaFilterUrl = factory.addAlphaFilter(map);
  const luminosityFilterUrl = factory.addLuminosityFilter(map);
  if (alphaFilterUrl === "none" || luminosityFilterUrl === "none") {
    throw new Error("SMask filter not applied properly");
  }
  if (!alphaFilterUrl.includes("alpha_map") || !luminosityFilterUrl.includes("luminosity_map")) {
    throw new Error("Unexpected filter URL format: " + alphaFilterUrl + " / " + luminosityFilterUrl);
  }
});
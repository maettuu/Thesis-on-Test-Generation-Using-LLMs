it("should highlight and comment the text selection in a PDF", async () => {
  const { AnnotationEditorUIManager } = await import("../../src/display/editor/tools.js");
  const { FloatingToolbar } = await import("../../src/display/editor/toolbar.js");

  const mockUIManager = {
    _signal: new AbortController().signal,
    highlightSelection: jest.fn(),
    commentSelection: jest.fn(),
    hasCommentManager: () => true,
  };

  const floatingToolbar = new FloatingToolbar(mockUIManager);
  const toolbarElement = floatingToolbar.show(document.createElement("div"), [], true);

  const highlightButton = toolbarElement.querySelector(".highlightButton");
  const commentButton = toolbarElement.querySelector(".commentButton");

  highlightButton.click();
  commentButton.click();

  expect(mockUIManager.highlightSelection).toHaveBeenCalledWith("floating_button");
  expect(mockUIManager.commentSelection).toHaveBeenCalledWith("floating_button");
});
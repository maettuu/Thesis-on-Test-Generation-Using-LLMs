it("should add highlight and comment entries in context menu", async () => {
  const { PDFDocument } = await import("../../src/core/pdf_document.js");
  const { PDFPage } = await import("../../src/core/pdf_page.js");
  const { TextLayer } = await import("../../src/display/text_layer.js");
  const { AnnotationEditorUIManager } = await import("../../src/display/editor/tools.js");

  const pdf = await PDFDocument.load(await fetch("test.pdf"));
  const page = await pdf.getPage(1);
  const textLayer = new TextLayer({
    page,
    viewport: page.getViewport({ scale: 1 }),
    textSelection: true
  });

  const uiManager = new AnnotationEditorUIManager();
  const mockHighlight = jest.fn();
  const mockComment = jest.fn();

  uiManager.highlightSelection = mockHighlight;
  uiManager.commentSelection = mockComment;

  const selection = document.getSelection();
  selection.removeAllRanges();
  const range = document.createRange();
  range.selectNodeContents(textLayer.div);
  selection.addRange(range);

  const contextMenuEvent = new Event("contextmenu", { bubbles: true, cancelable: true });
  textLayer.div.dispatchEvent(contextMenuEvent);

  expect(mockHighlight).toHaveBeenCalled();
  expect(mockComment).toHaveBeenCalled();
});
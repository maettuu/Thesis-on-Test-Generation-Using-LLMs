it("should save annotations on PDFs with certain linearization", async () => {
  const { PDFDocument } = await import("../../src/display/api.js");
  const { buildGetDocumentParams } = await import("./test_utils.js");
  const loadingTask = getDocument(buildGetDocumentParams('bug1844572.pdf'));

  const pdfDoc = await loadingTask.promise;
  const firstPage = await pdfDoc.getPage(1);
  const annotations = await firstPage.getAnnotations();
  const newAnnotation = {
    type: 0, // Text annotation
    rect: [100, 100, 200, 200],
    contents: "Test annotation"
  };

  await pdfDoc.addAnnotation(newAnnotation, 1);

  const savedPdfBytes = await pdfDoc.save();
  const loadedPdfDoc = await PDFDocument.load(savedPdfBytes);
  const loadedPage = await loadedPdfDoc.getPage(1);
  const loadedAnnotations = await loadedPage.getAnnotations();

  if (!loadedAnnotations || loadedAnnotations.length === 0) {
    throw new Error("Annotations not saved after PDF update");
  }
});
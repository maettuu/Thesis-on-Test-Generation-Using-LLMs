it("should save PDF annotations correctly", async () => {
  const { getDocument } = await import('../../src/display/api.js');
  const { buildGetDocumentParams } = await import('./test_utils.js');
  const loadingTask = getDocument(buildGetDocumentParams('bug1844572.pdf'));
  const pdfDocument = await loadingTask.promise;
  const page = await pdfDocument.getPage(1);
  const annotations = await page.getAnnotations();
  const annotationStorage = new Map();
  annotations.forEach(annotation => {
    annotationStorage.set(annotation.id, { value: "Test" });
  });
  const data = await pdfDocument.saveDocument({ annotationStorage });
  const newLoadingTask = getDocument({ data });
  const newPdfDocument = await newLoadingTask.promise;
  const newPage = await newPdfDocument.getPage(1);
  const newAnnotations = await newPage.getAnnotations();
  const expected = annotations.length;
  const actual = newAnnotations.length;
  expect(actual).toBe(expected);
});
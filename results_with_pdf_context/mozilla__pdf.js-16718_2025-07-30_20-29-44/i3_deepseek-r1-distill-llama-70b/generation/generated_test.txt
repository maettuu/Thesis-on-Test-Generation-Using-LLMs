it("should save annotations on linearized PDFs", async () => {
  const { getDocument } = await import("../../src/display/api.js");
  const { buildGetDocumentParams } = await import("./test_utils.js");
  const loadingTask = getDocument(buildGetDocumentParams('bug1844572.pdf'));

  const { numPages } = await loadingTask.promise;
  const page = await loadingTask.getDocument().getPage(0);
  const annotations = [
    {
      type: "highlight",
      quads: [[0, 0, 100, 0, 100, 100, 0, 100]],
      color: "#FF0000",
      content: "Test annotation"
    }
  ];

  const savedData = await page.saveAnnotations(annotations);
  const expectedPattern = /\/Annots\s*\[\s*<</s*.*?>>\s*\]/;

  expect(bytesToString(savedData)).toMatch(expectedPattern);
});
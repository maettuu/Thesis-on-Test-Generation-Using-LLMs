import { ToUnicodeMap } from "../../src/core/to_unicode_map.js";
import { expect } from "../../web/test_utils/testreporter.js";

describe("ToUnicodeMap", () => {
  it("should correctly map Extension B characters", async () => {
    // Create a test cmap with Extension B characters
    const cmap = {
      "0": "A", // BMP character
      "1": "ðŸ§‘ðŸ»" // Extension B character (U+1F9D1)
    };

    const toUnicodeMap = new ToUnicodeMap(cmap);
    const expectedCodePoints = [65, 0x1F9D1]; // 65 is 'A', 0x1F9D1 is 'ðŸ§‘ðŸ»'
    const actualCodePoints = [];

    toUnicodeMap.forEach((charCode, codePoint) => {
      actualCodePoints.push(codePoint);
    });

    expect(actualCodePoints).toEqual(expectedCodePoints);
  });
});
it("should display top and bottom images in pdf with masks", async () => {
  const { PDFDocument } = await import("../../src/core/document.js");
  const { PDFPageProxy } = await import("../../src/display/api.js");

  // Load a test PDF with images that have masks
  const pdf = await PDFDocument.load(await fetch("test.pdf").then(res => res.arrayBuffer()));

  // Get the first page
  const page = (await pdf.getPages()).find(p => p.pageNumber === 1);

  // Render the page
  const viewport = page.getViewport({ scale: 1 });
  const canvas = document.createElement('canvas');
  const context = canvas.getContext('2d');
  await page.render({ canvasContext: context, viewport });

  // Check if images are rendered
  const expectedImageCount = 2; // Top and bottom images
  const actualImageCount = (context.__getDrawCalls || () => []).call(context).length;

  expect(actualImageCount).toBe(expectedImageCount);
});
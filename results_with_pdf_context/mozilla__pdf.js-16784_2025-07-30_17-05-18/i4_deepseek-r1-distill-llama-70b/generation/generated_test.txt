it("should resize SVG images correctly when added", async () => {
  const { ImageManager } = await import("../../src/display/editor/tools.js");
  const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>`;
  const imageManager = new ImageManager();

  // Create a canvas to draw the SVG
  const canvas = new OffscreenCanvas(1, 3);
  const ctx = canvas.getContext("2d");

  // Get the image bitmap
  const image = await imageManager.getFromUrl(svg);

  // Draw the image on the canvas
  ctx.drawImage(image.bitmap, 0, 0, 1, 1, 0, 0, 1, 3);

  // Check the pixel data
  const pixels = ctx.getImageData(0, 0, 1, 1).data;
  const bottomPixel = ctx.getImageData(0, 2, 1, 1).data;

  // The bottom of the canvas should now be red due to resizing
  expect(pixels[0]).toBe(255); // Red
  expect(pixels[1]).toBe(0);   // Green
  expect(pixels[2]).toBe(0);   // Blue
  expect(bottomPixel[0]).toBe(255); // Resized area should also be red
});
it("should correctly render PDF with transparency filters in Firefox when base href is present", async () => {
  const { DOMFilterFactory } = await import("../../src/display/display_utils.js");
  const { PDFDocumentProxy } = await import("../../src/display/api.js");
  const { createIdFactory } = await import("./test_utils.js");

  const docId = createIdFactory(0).createObjId();
  const filterFactory = new DOMFilterFactory({ docId });

  const pdfUrl = "https://github.com/mozilla/pdf.js/files/11229069/test.pdf";
  const loadingTask = PDFDocumentProxy.getDocument(pdfUrl);
  const pdfDocument = await loadingTask.promise;
  const page = await pdfDocument.getPage(1);

  const maps = [0.5, 0.5, 0.5];
  const expectedUrl = `url(${document.URL.split("#", 1)[0]}#g_${docId}_transfer_map_0)`;
  const actualUrl = filterFactory.addFilter(maps);

  expect(actualUrl).toBe(expectedUrl);
});
[2025-07-28 23:20:07] MARKER   : =============== Running Payload #19716 ===============
[2025-07-28 23:20:07] MARKER   : ================ Preparing Environment ===============
[2025-07-28 23:20:08] SUCCESS  : Linked GitHub issue #16742 fetched successfully
[2025-07-28 23:20:11] SUCCESS  : PDF file issue16742.pdf fetched successfully
[2025-07-28 23:20:11] INFO     : Cloning repository https://github.com/mozilla/pdf.js.git
[2025-07-28 23:20:21] SUCCESS  : Cloning successful
[2025-07-28 23:20:21] INFO     : Fetching test file for injection...
[2025-07-28 23:20:22] SUCCESS  : Test file test/unit/annotation_spec.js fetched successfully
[2025-07-28 23:20:23] WARNING  : No existing image 'image_mozilla__pdf.js-19716' found
[2025-07-28 23:20:23] INFO     : Building from scratch based on commit bcba053a5e7e33b56ba3d1f113e4bf84f103c664
[2025-07-28 23:24:40] SUCCESS  : Docker image 'image_mozilla__pdf.js-19716' built successfully
[2025-07-28 23:24:40] MARKER   : ================ Preparation Complete ================
[2025-07-28 23:24:40] MARKER   : Attempt 1 with model gpt-4o
[2025-07-28 23:24:40] MARKER   : =============== Test Generation Started ==============
[2025-07-28 23:24:41] MARKER   : Running test in pre-PR codebase...
[2025-07-28 23:24:41] INFO     : Creating container...
[2025-07-28 23:24:43] SUCCESS  : Container ede7dd3ad2b6 started
[2025-07-28 23:24:43] SUCCESS  : File test/pdfs/issue16742.pdf added to container successfully
[2025-07-28 23:24:43] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-28 23:24:43] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-28 23:24:43] INFO     : Running test command...
[2025-07-28 23:25:16] SUCCESS  : Test command executed
[2025-07-28 23:25:16] FAIL     : Test evaluated as failed
[2025-07-28 23:25:16] WARNING  : Stopping and removing container...
[2025-07-28 23:25:28] SUCCESS  : Container stopped and removed
[2025-07-28 23:25:28] MARKER   : Running test in post-PR codebase...
[2025-07-28 23:25:28] INFO     : Creating container...
[2025-07-28 23:25:30] SUCCESS  : Container e387fbccba7c started
[2025-07-28 23:25:30] SUCCESS  : File test/pdfs/issue16742.pdf added to container successfully
[2025-07-28 23:25:30] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-28 23:25:30] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-28 23:25:30] SUCCESS  : File golden_code_patch.diff added to container successfully
[2025-07-28 23:25:30] SUCCESS  : Patch file golden_code_patch.diff applied successfully
[2025-07-28 23:25:30] INFO     : Running test command...
[2025-07-28 23:26:02] SUCCESS  : Test command executed
[2025-07-28 23:26:02] INFO     : Test evaluated as passed
[2025-07-28 23:26:02] WARNING  : Stopping and removing container...
[2025-07-28 23:26:13] SUCCESS  : Container stopped and removed
[2025-07-28 23:26:13] SUCCESS  : Fail-to-Pass test generated
[2025-07-28 23:26:13] SUCCESS  : Suggested test for PR:


Hi! ðŸ¤– The test below is automatically generated and serves as a regression test for this PR because it:
- passes in the new codebase after the PR, and
- fails in the old codebase before the PR.

```javascript
it("should apply the rotated soft mask transform correctly", async () => {
  const { CanvasGraphics } = await import("../../src/display/canvas.js");
  const expectedMatrix = new DOMMatrix().rotate(45);
  const fakeSuspendedCtx = {
    canvas: { width: 100, height: 100 },
    getTransform() { return expectedMatrix; }
  };
  let recordedMatrix = null;
  const fakeNewCtx = {
    canvas: { width: 100, height: 100 },
    setTransform(matrix) { recordedMatrix = matrix; }
  };
  const dummyCachedCanvases = {
    getCanvas(_id, width, height) {
      return { canvas: { width, height }, context: fakeNewCtx };
    }
  };
  const cg = new CanvasGraphics(
    fakeSuspendedCtx,
    {},
    {},
    {},
    {},
    { optionalContentConfig: {} },
    new Map(),
    {}
  );
  cg.cachedCanvases = dummyCachedCanvases;
  cg.beginSMaskMode();
  expect(recordedMatrix).toEqual(expectedMatrix);
});
```

If you find this regression test useful, feel free to insert it to your test suite.
Our automated pipeline inserted the test in the `test/unit/annotation_spec.js` file before running it.

This is part of our research at the [ZEST](https://www.ifi.uzh.ch/en/zest.html) group of University of Zurich in collaboration with [Mozilla](https://www.mozilla.org).
If you have any suggestions, questions, or simply want to learn more, feel free to contact us at konstantinos.kitsios@uzh.ch and mcastelluccio@mozilla.com.

[2025-07-28 23:26:13] MARKER   : =============== Test Generation Finished =============
[2025-07-28 23:26:13] SUCCESS  : Attempt 1 with model gpt-4o finished successfully
[2025-07-28 23:26:13] SUCCESS  : Test file copied to generated_tests/pdf_js_19716_i1_gpt-4o.txt
[2025-07-28 23:26:13] INFO     : Environment ready â€“ preparation skipped
[2025-07-28 23:26:13] MARKER   : Attempt 1 with model llama-3.3-70b-versatile
[2025-07-28 23:26:13] MARKER   : =============== Test Generation Started ==============
[2025-07-28 23:26:13] MARKER   : Running test in pre-PR codebase...
[2025-07-28 23:26:13] INFO     : Creating container...
[2025-07-28 23:26:15] SUCCESS  : Container b3fe353c59e8 started
[2025-07-28 23:26:15] SUCCESS  : File test/pdfs/issue16742.pdf added to container successfully
[2025-07-28 23:26:15] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-28 23:26:15] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-28 23:26:15] INFO     : Running test command...
[2025-07-28 23:26:47] SUCCESS  : Test command executed
[2025-07-28 23:26:47] FAIL     : Test evaluated as failed
[2025-07-28 23:26:47] WARNING  : Stopping and removing container...
[2025-07-28 23:26:58] SUCCESS  : Container stopped and removed
[2025-07-28 23:26:58] MARKER   : Running test in post-PR codebase...
[2025-07-28 23:26:58] INFO     : Creating container...
[2025-07-28 23:26:59] SUCCESS  : Container a0e01b882cff started
[2025-07-28 23:27:00] SUCCESS  : File test/pdfs/issue16742.pdf added to container successfully
[2025-07-28 23:27:00] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-28 23:27:00] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-28 23:27:00] SUCCESS  : File golden_code_patch.diff added to container successfully
[2025-07-28 23:27:00] SUCCESS  : Patch file golden_code_patch.diff applied successfully
[2025-07-28 23:27:00] INFO     : Running test command...
[2025-07-28 23:27:32] SUCCESS  : Test command executed
[2025-07-28 23:27:32] INFO     : Test evaluated as passed
[2025-07-28 23:27:32] WARNING  : Stopping and removing container...
[2025-07-28 23:27:43] SUCCESS  : Container stopped and removed
[2025-07-28 23:27:43] SUCCESS  : Fail-to-Pass test generated
[2025-07-28 23:27:43] SUCCESS  : Suggested test for PR:


Hi! ðŸ¤– The test below is automatically generated and serves as a regression test for this PR because it:
- passes in the new codebase after the PR, and
- fails in the old codebase before the PR.

```javascript
it("should apply the rotated soft mask transform correctly", async () => {
  const { CanvasGraphics } = await import("../../src/display/canvas.js");
  const expectedMatrix = new DOMMatrix().rotate(45);
  const fakeSuspendedCtx = {
    canvas: { width: 100, height: 100 },
    getTransform() { return expectedMatrix; }
  };
  let recordedMatrix = null;
  const fakeNewCtx = {
    canvas: { width: 100, height: 100 },
    setTransform(matrix) { recordedMatrix = matrix; }
  };
  const dummyCachedCanvases = {
    getCanvas(_id, width, height) {
      return { canvas: { width, height }, context: fakeNewCtx };
    }
  };
  const cg = new CanvasGraphics(
    fakeSuspendedCtx,
    {},
    {},
    {},
    {},
    { optionalContentConfig: {} },
    new Map(),
    {}
  );
  cg.cachedCanvases = dummyCachedCanvases;
  cg.beginSMaskMode();
  expect(recordedMatrix).toEqual(expectedMatrix);
});
```

If you find this regression test useful, feel free to insert it to your test suite.
Our automated pipeline inserted the test in the `test/unit/annotation_spec.js` file before running it.

This is part of our research at the [ZEST](https://www.ifi.uzh.ch/en/zest.html) group of University of Zurich in collaboration with [Mozilla](https://www.mozilla.org).
If you have any suggestions, questions, or simply want to learn more, feel free to contact us at konstantinos.kitsios@uzh.ch and mcastelluccio@mozilla.com.

[2025-07-28 23:27:43] MARKER   : =============== Test Generation Finished =============
[2025-07-28 23:27:43] SUCCESS  : Attempt 1 with model llama-3.3-70b-versatile finished successfully
[2025-07-28 23:27:43] SUCCESS  : Test file copied to generated_tests/pdf_js_19716_i1_llama-3.3-70b-versatile.txt
[2025-07-28 23:27:43] INFO     : Environment ready â€“ preparation skipped
[2025-07-28 23:27:43] MARKER   : Attempt 1 with model deepseek-r1-distill-llama-70b
[2025-07-28 23:27:43] MARKER   : =============== Test Generation Started ==============
[2025-07-28 23:27:43] MARKER   : Running test in pre-PR codebase...
[2025-07-28 23:27:43] INFO     : Creating container...
[2025-07-28 23:27:45] SUCCESS  : Container bdecf6b6ff42 started
[2025-07-28 23:27:45] SUCCESS  : File test/pdfs/issue16742.pdf added to container successfully
[2025-07-28 23:27:45] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-28 23:27:45] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-28 23:27:45] INFO     : Running test command...
[2025-07-28 23:28:17] SUCCESS  : Test command executed
[2025-07-28 23:28:17] FAIL     : Test evaluated as failed
[2025-07-28 23:28:17] WARNING  : Stopping and removing container...
[2025-07-28 23:28:28] SUCCESS  : Container stopped and removed
[2025-07-28 23:28:28] MARKER   : Running test in post-PR codebase...
[2025-07-28 23:28:28] INFO     : Creating container...
[2025-07-28 23:28:29] SUCCESS  : Container 59596fb8b15d started
[2025-07-28 23:28:29] SUCCESS  : File test/pdfs/issue16742.pdf added to container successfully
[2025-07-28 23:28:29] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-28 23:28:29] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-28 23:28:29] SUCCESS  : File golden_code_patch.diff added to container successfully
[2025-07-28 23:28:29] SUCCESS  : Patch file golden_code_patch.diff applied successfully
[2025-07-28 23:28:29] INFO     : Running test command...
[2025-07-28 23:29:02] SUCCESS  : Test command executed
[2025-07-28 23:29:02] INFO     : Test evaluated as passed
[2025-07-28 23:29:02] WARNING  : Stopping and removing container...
[2025-07-28 23:29:13] SUCCESS  : Container stopped and removed
[2025-07-28 23:29:13] SUCCESS  : Fail-to-Pass test generated
[2025-07-28 23:29:13] SUCCESS  : Suggested test for PR:


Hi! ðŸ¤– The test below is automatically generated and serves as a regression test for this PR because it:
- passes in the new codebase after the PR, and
- fails in the old codebase before the PR.

```javascript
it("should apply the rotated soft mask transform correctly", async () => {
  const { CanvasGraphics } = await import("../../src/display/canvas.js");
  const expectedMatrix = new DOMMatrix().rotate(45);
  const fakeSuspendedCtx = {
    canvas: { width: 100, height: 100 },
    getTransform() { return expectedMatrix; }
  };
  let recordedMatrix = null;
  const fakeNewCtx = {
    canvas: { width: 100, height: 100 },
    setTransform(matrix) { recordedMatrix = matrix; }
  };
  const dummyCachedCanvases = {
    getCanvas(_id, width, height) {
      return { canvas: { width, height }, context: fakeNewCtx };
    }
  };
  const cg = new CanvasGraphics(
    fakeSuspendedCtx,
    {},
    {},
    {},
    {},
    { optionalContentConfig: {} },
    new Map(),
    {}
  );
  cg.cachedCanvases = dummyCachedCanvases;
  cg.beginSMaskMode();
  expect(recordedMatrix).toEqual(expectedMatrix);
});
```

If you find this regression test useful, feel free to insert it to your test suite.
Our automated pipeline inserted the test in the `test/unit/annotation_spec.js` file before running it.

This is part of our research at the [ZEST](https://www.ifi.uzh.ch/en/zest.html) group of University of Zurich in collaboration with [Mozilla](https://www.mozilla.org).
If you have any suggestions, questions, or simply want to learn more, feel free to contact us at konstantinos.kitsios@uzh.ch and mcastelluccio@mozilla.com.

[2025-07-28 23:29:13] MARKER   : =============== Test Generation Finished =============
[2025-07-28 23:29:13] SUCCESS  : Attempt 1 with model deepseek-r1-distill-llama-70b finished successfully
[2025-07-28 23:29:13] SUCCESS  : Test file copied to generated_tests/pdf_js_19716_i1_deepseek-r1-distill-llama-70b.txt
[2025-07-28 23:29:13] SUCCESS  : MOCK response fetched successfully
[2025-07-28 23:29:13] INFO     : Environment ready â€“ preparation skipped
[2025-07-28 23:29:13] MARKER   : Attempt 1 with model MOCK
[2025-07-28 23:29:13] MARKER   : =============== Test Generation Started ==============
[2025-07-28 23:29:13] MARKER   : Running test in pre-PR codebase...
[2025-07-28 23:29:13] INFO     : Creating container...
[2025-07-28 23:29:14] SUCCESS  : Container 1b0150d555b5 started
[2025-07-28 23:29:15] SUCCESS  : File test/pdfs/issue16742.pdf added to container successfully
[2025-07-28 23:29:15] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-28 23:29:15] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-28 23:29:15] INFO     : Running test command...
[2025-07-28 23:29:46] SUCCESS  : Test command executed
[2025-07-28 23:29:46] FAIL     : Test evaluated as failed
[2025-07-28 23:29:46] WARNING  : Stopping and removing container...
[2025-07-28 23:29:58] SUCCESS  : Container stopped and removed
[2025-07-28 23:29:58] MARKER   : Running test in post-PR codebase...
[2025-07-28 23:29:58] INFO     : Creating container...
[2025-07-28 23:29:59] SUCCESS  : Container ecdfa9ee0aec started
[2025-07-28 23:29:59] SUCCESS  : File test/pdfs/issue16742.pdf added to container successfully
[2025-07-28 23:29:59] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-28 23:29:59] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-28 23:29:59] SUCCESS  : File golden_code_patch.diff added to container successfully
[2025-07-28 23:30:00] SUCCESS  : Patch file golden_code_patch.diff applied successfully
[2025-07-28 23:30:00] INFO     : Running test command...
[2025-07-28 23:30:31] SUCCESS  : Test command executed
[2025-07-28 23:30:31] INFO     : Test evaluated as passed
[2025-07-28 23:30:31] WARNING  : Stopping and removing container...
[2025-07-28 23:30:44] SUCCESS  : Container stopped and removed
[2025-07-28 23:30:44] SUCCESS  : Fail-to-Pass test generated
[2025-07-28 23:30:44] SUCCESS  : Suggested test for PR:


Hi! ðŸ¤– The test below is automatically generated and serves as a regression test for this PR because it:
- passes in the new codebase after the PR, and
- fails in the old codebase before the PR.

```javascript
it("should apply the rotated soft mask transform correctly", async () => {
  const { CanvasGraphics } = await import("../../src/display/canvas.js");
  const expectedMatrix = new DOMMatrix().rotate(45);
  const fakeSuspendedCtx = {
    canvas: { width: 100, height: 100 },
    getTransform() { return expectedMatrix; }
  };
  let recordedMatrix = null;
  const fakeNewCtx = {
    canvas: { width: 100, height: 100 },
    setTransform(matrix) { recordedMatrix = matrix; }
  };
  const dummyCachedCanvases = {
    getCanvas(_id, width, height) {
      return { canvas: { width, height }, context: fakeNewCtx };
    }
  };
  const cg = new CanvasGraphics(
    fakeSuspendedCtx,
    {},
    {},
    {},
    {},
    { optionalContentConfig: {} },
    new Map(),
    {}
  );
  cg.cachedCanvases = dummyCachedCanvases;
  cg.beginSMaskMode();
  expect(recordedMatrix).toEqual(expectedMatrix);
});
```

If you find this regression test useful, feel free to insert it to your test suite.
Our automated pipeline inserted the test in the `test/unit/annotation_spec.js` file before running it.

This is part of our research at the [ZEST](https://www.ifi.uzh.ch/en/zest.html) group of University of Zurich in collaboration with [Mozilla](https://www.mozilla.org).
If you have any suggestions, questions, or simply want to learn more, feel free to contact us at konstantinos.kitsios@uzh.ch and mcastelluccio@mozilla.com.

[2025-07-28 23:30:44] MARKER   : =============== Test Generation Finished =============
[2025-07-28 23:30:44] SUCCESS  : MOCK finished successfully
[2025-07-28 23:30:44] SUCCESS  : Test file copied to generated_tests/pdf_js_19716_i1_MOCK.txt
[2025-07-28 23:30:44] MARKER   : =============== Finished Payload #19716 ==============
[2025-07-28 23:30:44] SUCCESS  : Directory tmp_repo_dir_mozilla__pdf.js-19716 removed successfully
[2025-07-28 23:30:46] SUCCESS  : Removed Docker image 'image_mozilla__pdf.js-19716'

it("should respect verbosity level when decoding JPX images", async () => {
  const { setVerbosityLevel, VerbosityLevel } = await import("../../src/shared/util.js");
  const { JpxImage } = await import("../../src/core/jpx.js");
  const testJpxFile = await import("../../test/data/jpx/test.jpx");

  setVerbosityLevel(VerbosityLevel.none);

  const consoleWarnSpy = jest.spyOn(console, 'warn').mockImplementation(() => {});

  try {
    await JpxImage.decode(await testJpxFile.arrayBuffer());
  } catch (error) {
    expect(error).toBeUndefined();
  }

  expect(consoleWarnSpy).not.toHaveBeenCalled();

  consoleWarnSpy.mockRestore();
});
it("should respect verbosity level when issuing OpenJPEG warnings", async () => {
  const originalVerbosity = getVerbosityLevel();
  const warnSpy = jest.spyOn(console, 'warn').mockImplementation(() => {});

  try {
    setVerbosityLevel(VerbosityLevel.error);

    const testData = new TextEncoder('utf-8').encode('/* jpx data */');
    const result = await JpxImage.decode(testData);

    expect(warnSpy).not.toHaveBeenCalled();
  } catch (error) {
    console.error('Error during JPX decoding:', error);
    throw error;
  } finally {
    setVerbosityLevel(originalVerbosity);
    warnSpy.mockRestore();
  }
});
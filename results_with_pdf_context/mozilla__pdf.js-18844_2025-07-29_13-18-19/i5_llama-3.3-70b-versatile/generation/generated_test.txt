it("should render text layer with correct font family on Windows and Firefox", async () => {
  const { TextLayer, FeatureTest, PageViewport } = await import("../../src/display/text_layer.js");
  const { PDFDocument, PDFPage } = await import("../../src/core/document.js");
  const { createIdFactory } = await import("./test_utils.js");

  const pdfDocument = await PDFDocument.load(await createIdFactory());
  const pdfPage = await pdfDocument.getPage(1);
  const viewport = new PageViewport({ pdfPage });

  const textLayer = new TextLayer({
    viewport,
    textContentItems: [{ str: "Hello World", font: { fontFamily: "sans-serif" } }],
  });

  const featureTest = new FeatureTest();
  featureTest.platform = { isWindows: true, isFirefox: true };

  const expectedFontFamily = "Calibri, sans-serif";
  const actualFontFamily = TextLayer.fontFamilyMap.get("sans-serif");

  expect(actualFontFamily).toBe(expectedFontFamily);
});
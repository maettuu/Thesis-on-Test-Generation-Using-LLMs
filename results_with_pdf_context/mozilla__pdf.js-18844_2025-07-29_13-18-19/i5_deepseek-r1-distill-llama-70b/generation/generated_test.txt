it("should adjust font family on Windows and Firefox", async () => {
  const { TextLayer, FeatureTest } = await import("../../src/display/text_layer.js");

  // Mock platform detection
  const originalPlatform = FeatureTest.platform;
  FeatureTest.platform = () => ({
    isMac: false,
    isWindows: true,
    isFirefox: true,
  });

  const textLayer = new TextLayer(null, null, null);

  // Expected font families after adjustment
  const expectedSansSerif = "Calibri, sans-serif";
  const expectedMonospace = "Lucida Console, monospace";

  // Actual font families from the adjusted map
  const actualSansSerif = TextLayer.fontFamilyMap.get("sans-serif");
  const actualMonospace = TextLayer.fontFamilyMap.get("monospace");

  // Cleanup
  FeatureTest.platform = originalPlatform;

  expect(actualSansSerif).toBe(expectedSansSerif);
  expect(actualMonospace).toBe(expectedMonospace);
});
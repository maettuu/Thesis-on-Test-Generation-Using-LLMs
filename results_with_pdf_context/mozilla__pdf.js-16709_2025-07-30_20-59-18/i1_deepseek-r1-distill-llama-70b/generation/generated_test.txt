it("should redo an annotation using keyboard shortcuts", async () => {
  const { PDFDocument } = await import("../../src/display/api.js");
  const { Annotation, AnnotationFactory, MarkupAnnotation } = await import("../../src/core/annotation.js");
  const { KeyManager } = await import("../../src/display/editor/tools.js");

  const pdfDocument = new PDFDocument(new XRefMock());
  const page = pdfDocument.addPage();
  const annotationStorage = pdfDocument.annotationStorage;

  const textAnnotation = AnnotationFactory.create(AnnotationType.TEXT, {
    text: "Test annotation",
    color: "#FF0000",
    page: page.ref,
  });

  // Add the annotation
  annotationStorage.addAnnotation(textAnnotation);
  expect(annotationStorage.getAnnotations().length).toBe(1);

  // Undo the annotation
  KeyManager.onKeyDown({ key: "z", ctrlKey: true, metaKey: true });
  expect(annotationStorage.getAnnotations().length).toBe(0);

  // Redo the annotation using the new keyboard shortcuts
  KeyManager.onKeyDown({ key: "Z", ctrlKey: true, shiftKey: true });
  expect(annotationStorage.getAnnotations().length).toBe(1);
});
<think>
Okay, so I need to write a regression test for this bug where the HTML spec page printed to PDF can't be opened in Firefox. The patch was applied to xref.js, so I should focus my test on that area.

First, I remember that the issue was related to the xref table not being correctly handled, especially with compressed streams. The patch fixed an issue where the generation number didn't match the index, causing incorrect entries in the xref table.

I should create a test that loads the specific PDF file, bug1978317.pdf, and checks if the xref table is correctly parsed. If the test passes after the patch, it means the bug is resolved.

I'll use the provided imports: getDocument from display/api.js and buildGetDocumentParams from test_utils.js. I'll load the PDF and check for any errors during loading. If no errors occur, the test passes.

So, the test will attempt to load the PDF and expect no exceptions. If the xref was broken before, the test would fail, but after the patch, it should succeed.
</think>

```javascript
it("should correctly parse xref table for bug1978317.pdf", async () => {
  const { getDocument } = await import('../../src/display/api.js');
  const { buildGetDocumentParams } = await import('./test_utils.js');
  const loadingTask = getDocument(buildGetDocumentParams('bug1978317.pdf'));
  
  await expect(loadingTask).resolves.not.toThrow();
});
```
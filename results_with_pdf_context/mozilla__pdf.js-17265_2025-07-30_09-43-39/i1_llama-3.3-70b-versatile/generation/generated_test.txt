it("should load module script with correct MIME type", async () => {
  const { PDFWorkerUtil } = await import("../../src/display/api.js");
  const { URL } = await import("url");
  const wrapper = `await import("https://mozilla.github.io/pdf.js/build/pdf.worker.mjs");`;
  const blob = new Blob([wrapper], { type: "text/javascript" });
  const blobUrl = URL.createObjectURL(blob);
  const script = document.createElement("script");
  script.type = "module";
  script.src = blobUrl;
  document.head.appendChild(script);
  await new Promise((resolve) => {
    script.onload = resolve;
    script.onerror = () => {
      throw new Error("Failed to load module script");
    };
  });
  expect(script.onerror).not.toHaveBeenCalled();
});
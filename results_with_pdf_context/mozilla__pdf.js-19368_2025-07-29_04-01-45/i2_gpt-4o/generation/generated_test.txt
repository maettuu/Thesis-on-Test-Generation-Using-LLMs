it("should immediately clear intentStates when a last chunk is received in nonprint mode", async () => {
  const { PDFPageProxy } = await import("../../src/display/api.js");
  const { assert } = await import("../../src/shared/util.js");
  const dummyTransport = {
    commonObjs: new Map(),
    getRenderingIntent: () => ({ renderingIntent: 2, cacheKey: "test" }),
  };
  const pdfPageProxy = new PDFPageProxy(0, {}, dummyTransport, false);
  const intentState = {
    renderTasks: new Set(),
    operatorList: { fnArray: [], argsArray: [], lastChunk: false, separateAnnots: null },
  };
  pdfPageProxy._intentStates.set("test", intentState);
  pdfPageProxy._renderPageChunk(
    { fnArray: [], argsArray: [], lastChunk: true, separateAnnots: null },
    intentState
  );
  assert.strictEqual(pdfPageProxy._intentStates.size, 0);
});

it("should correctly render highlights on cropped PDF when savingprinting", async () => {
  const { getDocument } = await import('../../src/display/api.js');
  const { buildGetDocumentParams } = await import('./test_utils.js');
  const loadingTask = getDocument(buildGetDocumentParams('bug1872721.pdf'));
  const pdfDocument = await loadingTask.promise;
  const page = await pdfDocument.getPage(1);
  const viewport = page.getViewport({ scale: 1.0 });
  const { AnnotationLayer } = await import('../../src/display/annotation_layer.js');
  const annotations = await page.getAnnotations();
  const annotationLayer = new AnnotationLayer();
  const div = document.createElement('div');
  annotationLayer.render({
    viewport,
    div,
    annotations,
    page,
    linkService: null,
    downloadManager: null,
  });
  const highlightAnnotations = annotations.filter(a => a.subtype === 'Highlight');
  const renderedHighlights = div.querySelectorAll('.annotationLayer .highlight');
  expect(renderedHighlights.length).toBe(highlightAnnotations.length);
});
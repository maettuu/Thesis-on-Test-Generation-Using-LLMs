it("should correctly render highlights on cropped PDF when savingprinting", async () => {
  const { getDocument } = await import("../../src/display/api.js");
  const { buildGetDocumentParams } = await import("./test_utils.js");
  const loadingTask = getDocument(buildGetDocumentParams("bug1872721.pdf"));
  const pdfDocument = await loadingTask.promise;
  const page = await pdfDocument.getPage(1);
  const { AnnotationEditorLayer } = await import("../../src/display/editor/annotation_editor_layer.js");
  const { AnnotationEditorUIManager } = await import("../../src/display/editor/tools.js");

  const uiManager = new AnnotationEditorUIManager();
  const editorLayer = new AnnotationEditorLayer({
    uiManager,
    pageIndex: 0,
    viewport: page.getViewport({ scale: 1.0 }),
  });

  await editorLayer.render(page);

  const highlightAnnotations = editorLayer.getAnnotations().filter(
    (annotation) => annotation.annotationType === AnnotationEditorType.HIGHLIGHT
  );

  const expectedHighlightCount = 1; // Assuming there should be one highlight
  const actualHighlightCount = highlightAnnotations.length;

  expect(actualHighlightCount).toBe(expectedHighlightCount);
});
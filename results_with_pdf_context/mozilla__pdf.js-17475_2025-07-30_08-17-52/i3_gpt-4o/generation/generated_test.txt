it("should render highlights correctly on cropped PDF when savingprinting", async () => {
  const { getDocument } = await import("../../src/display/api.js");
  const { buildGetDocumentParams } = await import("./test_utils.js");
  const { AnnotationEditorLayer } = await import("../../src/display/editor/annotation_editor_layer.js");
  const loadingTask = getDocument(buildGetDocumentParams("bug1872721.pdf"));
  const pdfDocument = await loadingTask.promise;
  const page = await pdfDocument.getPage(1);
  const viewport = page.getViewport({ scale: 1.0 });
  const annotationEditorLayer = new AnnotationEditorLayer({
    viewport,
    div: document.createElement("div"),
    uiManager: null,
  });
  await annotationEditorLayer.render(page);
  const highlightAnnotations = annotationEditorLayer.div.querySelectorAll(".highlightAnnotation");
  expect(highlightAnnotations.length).toBeGreaterThan(0);
  highlightAnnotations.forEach(annotation => {
    const rect = annotation.getBoundingClientRect();
    expect(rect.width).toBeGreaterThan(0);
    expect(rect.height).toBeGreaterThan(0);
  });
});
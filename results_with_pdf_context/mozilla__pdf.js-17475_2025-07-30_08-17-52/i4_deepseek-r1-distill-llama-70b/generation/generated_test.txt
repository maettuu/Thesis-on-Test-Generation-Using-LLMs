it("should correctly position highlights on cropped PDFs when serializeddeserialized", async () => {
  const { getDocument } = await import("../../src/display/api.js");
  const { buildGetDocumentParams } = await import("./test_utils.js");
  const loadingTask = getDocument(buildGetDocumentParams('bug1872721.pdf'));
  const pdfDocument = await loadingTask.promise;
  const pdfPage = await pdfDocument.getPage(1);
  const canvas = document.createElement("canvas");
  const context = canvas.getContext("2d");
  await pdfPage.render({
    canvasContext: context,
    viewport: pdfPage.getViewport({ scale: 1 })
  });

  const highlight = new HighlightEditor({
    color: "#ff0000",
    opacity: 0.5,
    width: 0.2,
    height: 0.1,
    x: 0.1,
    y: 0.1,
    pageIndex: 0
  });

  const serialized = highlight.serialize();
  const deserialized = HighlightEditor.deserialize(serialized, null, null);

  expect(deserialized.x).toBeCloseTo(0.1);
  expect(deserialized.y).toBeCloseTo(0.1);
});
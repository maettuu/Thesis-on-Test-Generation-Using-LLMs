it("should correctly render highlights on cropped PDF when savingprinting", async () => {
  const { getDocument } = await import('../../src/display/api.js');
  const { buildGetDocumentParams } = await import('./test_utils.js');
  const loadingTask = getDocument(buildGetDocumentParams('bug1872721.pdf'));
  const pdfDocument = await loadingTask.promise;
  const page = await pdfDocument.getPage(1);
  const viewport = page.getViewport({ scale: 1.0 });
  const annotations = await page.getAnnotations();

  const highlightAnnotation = annotations.find(ann => ann.subtype === 'Highlight');
  const expectedQuadPoints = highlightAnnotation.quadPoints;

  const { AnnotationEditorLayer } = await import('../../src/display/editor/annotation_editor_layer.js');
  const editorLayer = new AnnotationEditorLayer({
    viewport,
    div: document.createElement('div'),
    pageIndex: 0,
    uiManager: null,
  });

  editorLayer.render({ annotations });
  const actualQuadPoints = editorLayer.getAnnotations().find(ann => ann.subtype === 'Highlight').quadPoints;

  expect(actualQuadPoints).toEqual(expectedQuadPoints);
});
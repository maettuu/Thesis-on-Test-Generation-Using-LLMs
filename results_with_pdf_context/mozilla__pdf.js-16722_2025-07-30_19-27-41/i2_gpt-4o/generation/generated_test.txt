it("should not change the filter to none unnecessarily", async () => {
  const { PDFDocumentProxy, getDocument } = await import("../../src/display/api.js");
  const { DOMCanvasFactory } = await import("../../src/display/display_utils.js");

  const loadingTask = getDocument({ url: "path/to/test-poster.pdf" });
  const pdfDocument = await loadingTask.promise;
  const page = await pdfDocument.getPage(1);

  const canvasFactory = new DOMCanvasFactory();
  const canvasAndContext = canvasFactory.create(1000, 1000);
  const renderContext = {
    canvasContext: canvasAndContext.context,
    viewport: page.getViewport({ scale: 1.0 }),
    canvasFactory,
  };

  const renderTask = page.render(renderContext);
  await renderTask.promise;

  const filterBefore = canvasAndContext.context.filter;
  canvasAndContext.context.filter = "blur(5px)";
  const filterAfter = canvasAndContext.context.filter;

  expect(filterBefore).toBe("none");
  expect(filterAfter).toBe("blur(5px)");
});
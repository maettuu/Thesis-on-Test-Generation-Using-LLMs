it("should reset ctxfilter to none only if its not already none or empty", async () => {
  const { CanvasGraphics } = await import("../../src/display/canvas.js");
  const { DOMCanvasFactory } = await import("../../src/display/display_utils.js");

  const canvasFactory = new DOMCanvasFactory();
  const canvasAndCtx = canvasFactory.create(100, 100);
  const ctx = canvasAndCtx.context;
  ctx.filter = "blur(5px)";

  const canvasGraphics = new CanvasGraphics(ctx, null, null, canvasFactory, null, {}, null, null);
  canvasGraphics.beginDrawing({ transform: null, viewport: { transform: [1, 0, 0, 1, 0, 0], scale: 1 } });

  const expected = "none";
  const actual = ctx.filter;
  expect(actual).toBe(expected);
});
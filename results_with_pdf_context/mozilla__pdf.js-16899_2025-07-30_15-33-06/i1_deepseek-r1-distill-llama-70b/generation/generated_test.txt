it("should display freetext annotation when popup data is present", async () => {
  const { getDocument } = await import('../../src/display/api.js');
  const { buildGetDocumentParams } = await import('./test_utils.js');
  const loadingTask = getDocument(buildGetDocumentParams('bug1851498.pdf'));
  const pdf = await loadingTask.promise;
  const page = await pdf.getPage(1);
  const pageProxy = new (await import('../../src/display/api.js').then(m => m.PDFPageProxy))(page);
  const annotations = await pageProxy.getAnnotations();

  const freeTextAnnotation = annotations.find(annotation => 
    annotation instanceof (await import('../../src/display/annotation_layer.js').then(m => m.FreeTextAnnotationElement))
  );

  expect(freeTextAnnotation).toBeTruthy();
});
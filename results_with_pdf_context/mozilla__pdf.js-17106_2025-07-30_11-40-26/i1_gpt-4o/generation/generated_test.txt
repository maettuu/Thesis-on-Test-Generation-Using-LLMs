it("should release ImageBitmap data after cleanup", async () => {
  const { getDocument } = await import("../../src/display/api.js");
  const loadingTask = getDocument(buildGetDocumentParams("basicapi.pdf"));
  const pdfDocument = await loadingTask.promise;
  const page = await pdfDocument.getPage(1);

  const renderTask = page.render({
    canvasContext: new OffscreenCanvas(1, 1).getContext("2d"),
    viewport: page.getViewport({ scale: 1.0 }),
  });

  await renderTask.promise;

  const imageData = { bitmap: new ImageBitmap(new OffscreenCanvas(1, 1)) };
  page.objs.resolve(1, imageData);

  page.cleanup();

  let errorOccurred = false;
  try {
    imageData.bitmap.close();
  } catch (e) {
    errorOccurred = true;
  }

  expect(errorOccurred).toBe(false);
});
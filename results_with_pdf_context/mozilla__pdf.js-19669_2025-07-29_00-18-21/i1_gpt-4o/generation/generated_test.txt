it("should not attempt to fetch WASM or ICC files when wasmUrl or iccUrl are missing", async () => {
  const { ColorSpaceUtils } = await import("../../src/core/colorspace_utils.js");
  const { CmykICCBasedCS } = await import("../../src/core/icc_colorspace.js");
  const { DeviceCmykCS } = await import("../../src/core/colorspace.js");
  const xhrCalls = [];
  const OriginalXHR = global.XMLHttpRequest;
  function FakeXHR() {}
  FakeXHR.prototype.open = function(method, url) {
    xhrCalls.push(url);
  };
  FakeXHR.prototype.send = function() {};
  global.XMLHttpRequest = FakeXHR;
  const cs = ColorSpaceUtils.cmyk;
  global.XMLHttpRequest = OriginalXHR;
  if (cs instanceof CmykICCBasedCS) {
    throw new Error("Expected fallback to DeviceCmykCS due to missing iccUrl");
  }
  if (!(cs instanceof DeviceCmykCS)) {
    throw new Error("Unexpected colorspace instance; expected DeviceCmykCS");
  }
  if (xhrCalls.some(url => url.includes("null"))) {
    throw new Error("Attempted to fetch resource with a null URL");
  }
});
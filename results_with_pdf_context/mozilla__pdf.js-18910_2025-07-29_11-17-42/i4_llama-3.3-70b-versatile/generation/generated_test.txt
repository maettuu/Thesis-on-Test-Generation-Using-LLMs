it("should speed up decoding images in PDFs using ImageDecoder", async () => {
  const { PDFImage } = await import("../../src/core/image.js");
  const { JpegStream } = await import("../../src/core/jpeg_stream.js");
  const { ImageDecoder } = await import("image-decoder");

  const image = new PDFImage({
    xref: {},
    res: {},
    image: new JpegStream({}, null, {}),
    isInline: false,
    pdfFunctionFactory: {},
    localColorSpaceCache: {},
  });

  const originalWidth = 100;
  const originalHeight = 100;
  const drawWidth = 100;
  const drawHeight = 100;

  const imageDataBeforePatch = await image.createImageData(false, true);
  const imageBeforePatch = await image.#getImage(originalWidth, originalHeight);

  const imageDataAfterPatch = await image.createImageData(false, true);
  const imageAfterPatch = await image.#getImage(originalWidth, originalHeight);

  expect(imageAfterPatch).not.toBeNull();
});
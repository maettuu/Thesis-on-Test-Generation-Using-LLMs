it("should use ImageDecoder for image decoding when available", async () => {
  const { JpegStream } = await import("../../src/core/jpeg_stream.js");
  const { PDFImage } = await import("../../src/core/image.js");

  // Create a sample JPEG image data
  const jpegData = new Uint8Array([0xFF, 0xD8, 0xFF, 0xE0]);

  // Mock the stream to return the sample data
  class MockStream {
    async getBytes() {
      return jpegData;
    }
  }

  const stream = new MockStream();

  // Create a PDFImage instance
  const image = new PDFImage({
    image: stream,
    width: 1,
    height: 1,
    isInline: true,
  });

  // Check if ImageDecoder is used
  const result = await image.getTransferableImage(1, 1);

  assert.ok(result, "ImageDecoder successfully provided a transferable image");
});
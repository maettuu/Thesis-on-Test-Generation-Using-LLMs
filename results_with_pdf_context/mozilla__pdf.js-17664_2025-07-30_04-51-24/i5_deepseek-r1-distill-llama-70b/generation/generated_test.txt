it("should update the free highlight outline to include the latest coordinates", async () => {
  const { PDFDocument } = await import("../../src/core/document.js");
  const { Page } = await import("../../src/core/document.js");
  const { FreeOutliner } = await import("../../src/display/editor/outliner.js");

  const doc = new PDFDocument();
  const page = new Page(doc);
  const outliner = new FreeOutliner();

  // Simulate drawing points
  outliner.add({ x: 100, y: 100 });
  outliner.add({ x: 200, y: 200 });
  outliner.add({ x: 300, y: 300 });

  // Get the outline path
  const outline = outliner.getOutline();

  // The expected outline should include the last coordinates
  const expectedOutline = [
    "M0,0 L0.5,0.5 L1,1 L1.5,1.5 L2,2 L1.5,1.5 L1,1",
    "L0.5,0.5 1,1 L1.5,1.5 2,2",
    "M2,2 L2.5,2.5 L3,3",
  ];

  // Verify the generated outline includes the latest points
  expect(outline).toContain(expectedOutline[2]);
});
it("should fix free highlighting lagging behind mouse cursor", async () => {
  const { FreeOutliner } = await import("../../src/display/editor/outliner.js");
  const { Util } = await import("../../shared/util.js");

  const box = { x: 0, y: 0, width: 100, height: 100 };
  const scaleFactor = 1;
  const thickness = 2;
  const isLTR = true;
  const innerMargin = 0;

  const outliner = new FreeOutliner(
    { x: 10, y: 10 },
    box,
    scaleFactor,
    thickness,
    isLTR,
    innerMargin
  );

  const points = [];
  for (let i = 0; i < 20; i++) {
    const angle = (i * Math.PI) / 5;
    points.push({
      x: 50 + 40 * Math.cos(angle),
      y: 50 + 40 * Math.sin(angle)
    });
  }

  let result = outliner.add(points[1]);
  while (points.length) {
    result = outliner.add(points.pop());
    expect(result).toBeTruthy();
  }

  const outlines = outliner.getOutlines();
  expect(outlines).toBeTruthy();
  expect(outlines.toSVGPath()).toMatch(/M.*Z/s);
});
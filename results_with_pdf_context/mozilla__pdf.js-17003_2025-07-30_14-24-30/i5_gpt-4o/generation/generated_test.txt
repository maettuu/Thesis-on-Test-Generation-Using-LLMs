it("should not log a warning when printing a PDF with an added annotation", async () => {
  const { AnnotationFactory } = await import("../../src/core/annotation.js");
  const { PDFDocument } = await import("../../src/core/document.js");
  const { PDFPageProxy } = await import("../../src/display/api.js");
  const { createIdFactory } = await import("./test_utils.js");
  const { PDFNetworkStream } = await import("../../src/display/network.js");

  const pdfManager = {
    evaluatorOptions: {},
  };
  const idFactory = createIdFactory();
  const annotationGlobals = {};
  const acroForm = new Map();
  const ref = null;
  const pageIndex = 0;
  const pageRef = null;
  const collectFields = true;

  const annotationFactory = new AnnotationFactory();
  const annotation = annotationFactory.create(
    pdfManager,
    ref,
    annotationGlobals,
    idFactory,
    collectFields,
    pageIndex,
    pageRef
  );

  const pdfDocument = new PDFDocument();
  const page = new PDFPageProxy(pdfDocument, pageIndex, pageRef, null, null);
  const networkStream = new PDFNetworkStream();

  const consoleWarnSpy = jest.spyOn(console, "warn").mockImplementation();

  await page.print({ annotation, networkStream });

  expect(consoleWarnSpy).not.toHaveBeenCalledWith(
    "Warning: Unknown field name, falling back to empty field name."
  );

  consoleWarnSpy.mockRestore();
});
it("should render emojis in FreeTextAnnotations correctly", async () => {
  const { getDocument } = await import("../../src/display/api.js");
  const { buildGetDocumentParams } = await import("./test_utils.js");
  const loadingTask = getDocument(buildGetDocumentParams("bug1669097.pdf"));
  const pdfDocument = await loadingTask.promise;
  const page = await pdfDocument.getPage(1);
  const annotations = await page.getAnnotations();

  const freeTextAnnotations = annotations.filter(
    annotation => annotation.subtype === "FreeText"
  );

  expect(freeTextAnnotations.length).toBeGreaterThan(0);

  const containsEmoji = freeTextAnnotations.some(annotation =>
    /[\u{1F600}-\u{1F64F}]/u.test(annotation.contents)
  );

  expect(containsEmoji).toBe(true);
});
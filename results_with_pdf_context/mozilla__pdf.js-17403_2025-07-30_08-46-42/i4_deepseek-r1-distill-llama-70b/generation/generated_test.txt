it("should improve rendering performance with multiple pages", async () => {
  const { MessageHandler, ...util } = await import("../../src/shared/message_handler.js");
  const { assert } = await import("chai");

  const comObj = {
    postMessage: () => {},
    addEventListener: () => {},
    removeEventListener: () => {}
  };

  const messageHandler = new MessageHandler("source", "target", comObj);
  const actionResults = [];
  const startTime = Date.now();
  const NUM_MESSAGES = 100;

  messageHandler.on("testAction", () => {
    actionResults.push(Date.now() - startTime);
    return Promise.resolve();
  });

  for (let i = 0; i < NUM_MESSAGES; i++) {
    await messageHandler.sendWithPromise("testAction", {});
  }

  const processingTime = Date.now() - startTime;
  assert.isBelow(processingTime, 500);
});
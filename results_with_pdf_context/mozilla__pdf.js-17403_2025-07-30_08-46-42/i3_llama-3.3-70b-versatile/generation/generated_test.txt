it("should render a PDF with many pages without slowing down", async () => {
  const { PDFWorker } = await import("../../src/display/api.js");
  const { MessageHandler } = await import("../../src/shared/message_handler.js");
  const worker = new PDFWorker();
  const messageHandler = new MessageHandler("test", "test", worker);
  const largePdf = new Array(1000).fill(0).map(() => ({ action: "testAction" }));
  const startTime = Date.now();
  for (const data of largePdf) {
    messageHandler._onComObjOnMessage({ data });
  }
  const endTime = Date.now();
  const renderTime = endTime - startTime;
  expect(renderTime).toBeLessThan(1000);
});
it("should throw an exception with the error message returned by openjpeg", async () => {
  const { JpxImage } = await import("../../src/core/jpx.js");
  const { console } = globalThis;
  const originalError = console.error;
  let errorMessage;
  console.error = (message) => {
    errorMessage = message;
  };
  try {
    await JpxImage.decode(null, true);
  } catch (error) {
    if (error instanceof Error && error.message.includes("Unknown format")) {
      // pass
    } else {
      throw error;
    }
  } finally {
    console.error = originalError;
  }
  if (errorMessage && errorMessage.includes("Unknown format")) {
    throw new Error("Error message was not replaced");
  }
});
it("should not log OpenJPEG Unknown format when decoding fails", async () => {
  const { JpxImage } = await import("../../src/core/jpx.js");
  const { console } = globalThis;
  const originalLog = console.log;
  const originalError = console.error;
  let loggedMessage = null;
  console.log = (...args) => {
    if (args[0].includes("OpenJPEG: Unknown format")) {
      loggedMessage = args[0];
    }
  };
  console.error = (...args) => {
    if (args[0].includes("OpenJPEG: Unknown format")) {
      loggedMessage = args[0];
    }
  };
  try {
    await JpxImage.decode(new Uint8Array(), false);
  } catch (error) {
    // expected
  } finally {
    console.log = originalLog;
    console.error = originalError;
  }
  expect(loggedMessage).toBeNull();
});
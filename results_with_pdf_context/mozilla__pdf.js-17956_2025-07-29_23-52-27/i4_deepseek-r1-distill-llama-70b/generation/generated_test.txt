it("should throw specific error message when JPX decode fails", async () => {
  const { JpxImage } = await import("../../src/core/jpx.js");
  const badData = new Uint8Array([0xff, 0xd8, 0xff, 0xe0]); // Corrupted JPX data

  try {
    await JpxImage.decode(badData, false);
    assert.fail("Expected JpxError to be thrown");
  } catch (error) {
    if (error instanceof Error && error.message === "JPX error: Unknown format") {
      // Expected error message after patch
      return;
    }
    assert.fail("Expected error message 'Unknown format' but got something else");
  }
});
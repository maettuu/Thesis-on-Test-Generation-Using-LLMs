it("should decode cmyk jpeg image using ImageDecoder", async () => {
  const { JpegImage } = require("../../src/core/jpg.js");
  const response = await fetch(`${getCrossOriginHostname()}/${TEST_PDFS_PATH}cmyc.jpg`);
  const data = await response.arrayBuffer();
  const uint8Data = new Uint8Array(data);

  let image;
  try {
    image = new JpegImage();
    await image.parse(uint8Data);
  } catch (ex) {
    throw new Error("JpegImage.parse failed: " + ex.message);
  }

  const useImageDecoder = JpegImage.canUseImageDecoder(uint8Data);
  if (!useImageDecoder) {
    throw new Error("ImageDecoder is not supported");
  }

  const expectedWidth = 200;
  const expectedHeight = 200;
  assert.equal(image.width, expectedWidth, "Width is incorrect");
  assert.equal(image.height, expectedHeight, "Height is incorrect");
  assert.equal(image.numComponents, 4, "Number of components should be 4 for CMYK");
});
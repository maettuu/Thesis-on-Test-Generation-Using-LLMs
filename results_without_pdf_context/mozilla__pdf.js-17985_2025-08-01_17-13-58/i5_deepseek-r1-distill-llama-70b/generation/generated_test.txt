it("should respect verbosity level when logging OpenJPEG warnings", async () => {
  const { JpxImage } = await import("../../src/core/jpx.js");
  const { warn } = await import("../../shared/util.js");

  // Mock console.warn to track warnings
  const mockWarn = jest.spyOn(console, 'warn').mockImplementation(() => {});

  // Set verbosity level to 'error' which should suppress warnings
  setVerbosityLevel('error');

  // Test data that triggers an OpenJPEG warning
  const testData = new Uint8Array([0x00, 0x6f, 0x62, 0x6a, 0x01, 0x00]); // Minimal JPX file

  // Decode should not trigger a warning due to verbosity level
  await JpxImage.decode(testData);

  // Verify that console.warn was not called
  expect(mockWarn).not.toHaveBeenCalled();

  // Cleanup
  mockWarn.mockRestore();
});
it("should throw an error when the wasm file is missing", async () => {
  const { JpxImage, JpxError } = await import("../../src/core/jpx.js");
  const coreUtils = await import("../../src/core/core_utils.js");
  const originalFetchBinaryData = coreUtils.fetchBinaryData;
  coreUtils.fetchBinaryData = () => Promise.reject(new Error("Missing wasm file"));
  const dummyBytes = new Uint8Array([1, 2, 3, 4]);
  await expect(JpxImage.decode(dummyBytes)).rejects.toThrow();
  coreUtils.fetchBinaryData = originalFetchBinaryData;
});
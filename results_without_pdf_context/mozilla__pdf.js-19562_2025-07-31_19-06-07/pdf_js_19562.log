[2025-07-31 19:06:07] MARKER   : =============== Running Payload #19562 ===============
[2025-07-31 19:06:07] MARKER   : ================ Preparing Environment ===============
[2025-07-31 19:06:08] SUCCESS  : Linked GitHub issue #19550 fetched successfully
[2025-07-31 19:06:11] WARNING  : No PDF file available
[2025-07-31 19:06:11] INFO     : Cloning repository https://github.com/mozilla/pdf.js.git
[2025-07-31 19:06:21] SUCCESS  : Cloning successful
[2025-07-31 19:06:21] INFO     : Fetching test file for injection...
[2025-07-31 19:06:22] SUCCESS  : Test file test/unit/api_spec.js fetched successfully
[2025-07-31 19:06:23] WARNING  : No existing image 'image_mozilla__pdf.js-19562' found
[2025-07-31 19:06:23] INFO     : Building from scratch based on commit 0e0872288ee449333da75361951e9f0daca56cda
[2025-07-31 19:16:01] SUCCESS  : Docker image 'image_mozilla__pdf.js-19562' built successfully
[2025-07-31 19:16:02] MARKER   : ================ Preparation Complete ================
[2025-07-31 19:16:02] MARKER   : Attempt 1 with model gpt-4o
[2025-07-31 19:16:02] MARKER   : =============== Test Generation Started ==============
[2025-07-31 19:16:02] INFO     : Querying LLM...
[2025-07-31 19:16:18] INFO     : HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-31 19:16:18] SUCCESS  : LLM response received
[2025-07-31 19:16:18] MARKER   : Running test in pre-PR codebase...
[2025-07-31 19:16:18] INFO     : Creating container...
[2025-07-31 19:16:21] SUCCESS  : Container 675dcc38a1ca started
[2025-07-31 19:16:21] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:16:21] CRITICAL : Failed to apply patch: patch: **** malformed patch at line 19:  

patching file test/unit/api_spec.js
patch unexpectedly ends in middle of line

[2025-07-31 19:16:21] WARNING  : Stopping and removing container...
[2025-07-31 19:16:33] SUCCESS  : Container stopped and removed
[2025-07-31 19:16:33] INFO     : Environment ready â€“ preparation skipped
[2025-07-31 19:16:33] MARKER   : Attempt 2 with model gpt-4o
[2025-07-31 19:16:33] MARKER   : =============== Test Generation Started ==============
[2025-07-31 19:16:33] INFO     : Querying LLM...
[2025-07-31 19:16:54] INFO     : HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-31 19:16:54] SUCCESS  : LLM response received
[2025-07-31 19:16:54] MARKER   : Running test in pre-PR codebase...
[2025-07-31 19:16:54] INFO     : Creating container...
[2025-07-31 19:16:58] SUCCESS  : Container 603a0d424246 started
[2025-07-31 19:16:58] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:16:58] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-31 19:16:58] INFO     : Running test command...
[2025-07-31 19:17:31] SUCCESS  : Test command executed
[2025-07-31 19:17:31] FAIL     : Test evaluated as failed
[2025-07-31 19:17:31] WARNING  : Stopping and removing container...
[2025-07-31 19:17:41] SUCCESS  : Container stopped and removed
[2025-07-31 19:17:41] MARKER   : Running test in post-PR codebase...
[2025-07-31 19:17:41] INFO     : Creating container...
[2025-07-31 19:17:43] SUCCESS  : Container 8bc302c385a5 started
[2025-07-31 19:17:43] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:17:43] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-31 19:17:43] SUCCESS  : File golden_code_patch.diff added to container successfully
[2025-07-31 19:17:43] SUCCESS  : Patch file golden_code_patch.diff applied successfully
[2025-07-31 19:17:43] INFO     : Running test command...
[2025-07-31 19:18:15] SUCCESS  : Test command executed
[2025-07-31 19:18:15] INFO     : Test evaluated as passed
[2025-07-31 19:18:15] WARNING  : Stopping and removing container...
[2025-07-31 19:18:26] SUCCESS  : Container stopped and removed
[2025-07-31 19:18:26] SUCCESS  : Fail-to-Pass test generated
[2025-07-31 19:18:26] SUCCESS  : Suggested test for PR:


Hi! ðŸ¤– The test below is automatically generated and serves as a regression test for this PR because it:
- passes in the new codebase after the PR, and
- fails in the old codebase before the PR.

```javascript
it("should render Russian characters correctly", async () => {
  const { getGlyphMapForStandardFonts } = await import("../../src/core/standard_fonts.js");
  const glyphMap = getGlyphMapForStandardFonts();
  const russianGlyphs = [1040, 1041, 1042, 1043, 1044, 1045, 1046, 1047, 1048, 1049, 1050, 1051, 1052, 1053, 1054, 1055, 1056, 1057, 1058, 1059, 1060, 1061, 1062, 1063, 1064, 1065, 1066, 1067, 1068, 1069, 1070];
  const expected = russianGlyphs.every(code => Object.values(glyphMap).includes(code));
  expect(expected).toBe(true);
});
```

If you find this regression test useful, feel free to insert it to your test suite.
Our automated pipeline inserted the test in the `test/unit/api_spec.js` file before running it.

This is part of our research at the [ZEST](https://www.ifi.uzh.ch/en/zest.html) group of University of Zurich in collaboration with [Mozilla](https://www.mozilla.org).
If you have any suggestions, questions, or simply want to learn more, feel free to contact us at konstantinos.kitsios@uzh.ch and mcastelluccio@mozilla.com.

[2025-07-31 19:18:26] MARKER   : =============== Test Generation Finished =============
[2025-07-31 19:18:26] SUCCESS  : Attempt 2 with model gpt-4o finished successfully
[2025-07-31 19:18:26] SUCCESS  : Test file copied to generated_tests/pdf_js_19562_i2_gpt-4o.txt
[2025-07-31 19:18:26] INFO     : Environment ready â€“ preparation skipped
[2025-07-31 19:18:26] MARKER   : Attempt 1 with model llama-3.3-70b-versatile
[2025-07-31 19:18:26] MARKER   : =============== Test Generation Started ==============
[2025-07-31 19:18:26] INFO     : Querying LLM...
[2025-07-31 19:18:28] INFO     : HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-31 19:18:28] SUCCESS  : LLM response received
[2025-07-31 19:18:28] MARKER   : Running test in pre-PR codebase...
[2025-07-31 19:18:28] INFO     : Creating container...
[2025-07-31 19:18:31] SUCCESS  : Container d2068c511277 started
[2025-07-31 19:18:31] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:18:31] CRITICAL : Failed to apply patch: patch: **** malformed patch at line 27:  

patching file test/unit/api_spec.js

[2025-07-31 19:18:31] WARNING  : Stopping and removing container...
[2025-07-31 19:18:42] SUCCESS  : Container stopped and removed
[2025-07-31 19:18:42] INFO     : Environment ready â€“ preparation skipped
[2025-07-31 19:18:42] MARKER   : Attempt 2 with model llama-3.3-70b-versatile
[2025-07-31 19:18:42] MARKER   : =============== Test Generation Started ==============
[2025-07-31 19:18:42] INFO     : Querying LLM...
[2025-07-31 19:18:44] INFO     : HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-31 19:18:44] SUCCESS  : LLM response received
[2025-07-31 19:18:45] MARKER   : Running test in pre-PR codebase...
[2025-07-31 19:18:45] INFO     : Creating container...
[2025-07-31 19:18:46] SUCCESS  : Container afbfcca067e3 started
[2025-07-31 19:18:46] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:18:46] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-31 19:18:46] INFO     : Running test command...
[2025-07-31 19:19:12] ERROR    : Test command failed
[2025-07-31 19:19:12] ERROR    : Test could not be evaluated
[2025-07-31 19:19:12] WARNING  : Stopping and removing container...
[2025-07-31 19:19:23] SUCCESS  : Container stopped and removed
[2025-07-31 19:19:23] MARKER   : Running test in post-PR codebase...
[2025-07-31 19:19:23] INFO     : Creating container...
[2025-07-31 19:19:25] SUCCESS  : Container c967895f9ef8 started
[2025-07-31 19:19:26] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:19:26] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-31 19:19:26] SUCCESS  : File golden_code_patch.diff added to container successfully
[2025-07-31 19:19:26] SUCCESS  : Patch file golden_code_patch.diff applied successfully
[2025-07-31 19:19:26] INFO     : Running test command...
[2025-07-31 19:19:53] ERROR    : Test command failed
[2025-07-31 19:19:53] ERROR    : Test could not be evaluated
[2025-07-31 19:19:53] WARNING  : Stopping and removing container...
[2025-07-31 19:20:04] SUCCESS  : Container stopped and removed
[2025-07-31 19:20:04] FAIL     : No Fail-to-Pass test generated
[2025-07-31 19:20:04] MARKER   : =============== Test Generation Finished =============
[2025-07-31 19:20:04] SUCCESS  : Attempt 2 with model llama-3.3-70b-versatile finished successfully
[2025-07-31 19:20:04] INFO     : Environment ready â€“ preparation skipped
[2025-07-31 19:20:04] MARKER   : Attempt 3 with model llama-3.3-70b-versatile
[2025-07-31 19:20:04] MARKER   : =============== Test Generation Started ==============
[2025-07-31 19:20:04] INFO     : Querying LLM...
[2025-07-31 19:20:06] INFO     : HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-31 19:20:06] SUCCESS  : LLM response received
[2025-07-31 19:20:06] MARKER   : Running test in pre-PR codebase...
[2025-07-31 19:20:06] INFO     : Creating container...
[2025-07-31 19:20:08] SUCCESS  : Container 132ebb0648f7 started
[2025-07-31 19:20:08] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:20:08] CRITICAL : Failed to apply patch: patch: **** malformed patch at line 27:  

patching file test/unit/api_spec.js
patch unexpectedly ends in middle of line

[2025-07-31 19:20:08] WARNING  : Stopping and removing container...
[2025-07-31 19:20:19] SUCCESS  : Container stopped and removed
[2025-07-31 19:20:19] INFO     : Environment ready â€“ preparation skipped
[2025-07-31 19:20:19] MARKER   : Attempt 4 with model llama-3.3-70b-versatile
[2025-07-31 19:20:19] MARKER   : =============== Test Generation Started ==============
[2025-07-31 19:20:19] INFO     : Querying LLM...
[2025-07-31 19:20:21] INFO     : HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-31 19:20:21] SUCCESS  : LLM response received
[2025-07-31 19:20:21] MARKER   : Running test in pre-PR codebase...
[2025-07-31 19:20:21] INFO     : Creating container...
[2025-07-31 19:20:22] SUCCESS  : Container e356937a600c started
[2025-07-31 19:20:22] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:20:22] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-31 19:20:22] INFO     : Running test command...
[2025-07-31 19:20:54] SUCCESS  : Test command executed
[2025-07-31 19:20:54] FAIL     : Test evaluated as failed
[2025-07-31 19:20:54] WARNING  : Stopping and removing container...
[2025-07-31 19:21:05] SUCCESS  : Container stopped and removed
[2025-07-31 19:21:05] MARKER   : Running test in post-PR codebase...
[2025-07-31 19:21:05] INFO     : Creating container...
[2025-07-31 19:21:07] SUCCESS  : Container 40a3ba56583a started
[2025-07-31 19:21:07] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:21:07] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-31 19:21:07] SUCCESS  : File golden_code_patch.diff added to container successfully
[2025-07-31 19:21:07] SUCCESS  : Patch file golden_code_patch.diff applied successfully
[2025-07-31 19:21:07] INFO     : Running test command...
[2025-07-31 19:21:39] SUCCESS  : Test command executed
[2025-07-31 19:21:39] FAIL     : Test evaluated as failed
[2025-07-31 19:21:39] WARNING  : Stopping and removing container...
[2025-07-31 19:21:50] SUCCESS  : Container stopped and removed
[2025-07-31 19:21:50] FAIL     : No Fail-to-Pass test generated
[2025-07-31 19:21:50] MARKER   : =============== Test Generation Finished =============
[2025-07-31 19:21:50] SUCCESS  : Attempt 4 with model llama-3.3-70b-versatile finished successfully
[2025-07-31 19:21:50] INFO     : Environment ready â€“ preparation skipped
[2025-07-31 19:21:50] MARKER   : Attempt 5 with model llama-3.3-70b-versatile
[2025-07-31 19:21:50] MARKER   : =============== Test Generation Started ==============
[2025-07-31 19:21:50] INFO     : Querying LLM...
[2025-07-31 19:21:51] INFO     : HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-31 19:21:51] SUCCESS  : LLM response received
[2025-07-31 19:21:51] MARKER   : Running test in pre-PR codebase...
[2025-07-31 19:21:51] INFO     : Creating container...
[2025-07-31 19:21:54] SUCCESS  : Container d64e47a981df started
[2025-07-31 19:21:54] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:21:54] CRITICAL : Failed to apply patch: patching file test/unit/api_spec.js
patch unexpectedly ends in middle of line
patch: **** malformed patch at line 22:  


[2025-07-31 19:21:54] WARNING  : Stopping and removing container...
[2025-07-31 19:22:05] SUCCESS  : Container stopped and removed
[2025-07-31 19:22:05] INFO     : Environment ready â€“ preparation skipped
[2025-07-31 19:22:05] MARKER   : Attempt 1 with model deepseek-r1-distill-llama-70b
[2025-07-31 19:22:05] MARKER   : =============== Test Generation Started ==============
[2025-07-31 19:22:05] INFO     : Querying LLM...
[2025-07-31 19:22:09] INFO     : HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-31 19:22:09] SUCCESS  : LLM response received
[2025-07-31 19:22:09] MARKER   : Running test in pre-PR codebase...
[2025-07-31 19:22:09] INFO     : Creating container...
[2025-07-31 19:22:11] SUCCESS  : Container 7f9e9e578a68 started
[2025-07-31 19:22:11] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:22:11] CRITICAL : Failed to apply patch: patch: **** malformed patch at line 27:  

patching file test/unit/api_spec.js
patch unexpectedly ends in middle of line

[2025-07-31 19:22:11] WARNING  : Stopping and removing container...
[2025-07-31 19:22:22] SUCCESS  : Container stopped and removed
[2025-07-31 19:22:22] INFO     : Environment ready â€“ preparation skipped
[2025-07-31 19:22:22] MARKER   : Attempt 2 with model deepseek-r1-distill-llama-70b
[2025-07-31 19:22:22] MARKER   : =============== Test Generation Started ==============
[2025-07-31 19:22:22] INFO     : Querying LLM...
[2025-07-31 19:22:38] INFO     : HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-31 19:22:38] SUCCESS  : LLM response received
[2025-07-31 19:22:39] MARKER   : Running test in pre-PR codebase...
[2025-07-31 19:22:39] INFO     : Creating container...
[2025-07-31 19:22:40] SUCCESS  : Container 43c149142c10 started
[2025-07-31 19:22:40] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:22:41] CRITICAL : Failed to apply patch: patch: **** malformed patch at line 48:  

patching file test/unit/api_spec.js
patch unexpectedly ends in middle of line

[2025-07-31 19:22:41] WARNING  : Stopping and removing container...
[2025-07-31 19:22:51] SUCCESS  : Container stopped and removed
[2025-07-31 19:22:51] INFO     : Environment ready â€“ preparation skipped
[2025-07-31 19:22:51] MARKER   : Attempt 3 with model deepseek-r1-distill-llama-70b
[2025-07-31 19:22:51] MARKER   : =============== Test Generation Started ==============
[2025-07-31 19:22:51] INFO     : Querying LLM...
[2025-07-31 19:22:56] INFO     : HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-31 19:22:56] SUCCESS  : LLM response received
[2025-07-31 19:22:56] MARKER   : Running test in pre-PR codebase...
[2025-07-31 19:22:56] INFO     : Creating container...
[2025-07-31 19:22:58] SUCCESS  : Container 9d3044529939 started
[2025-07-31 19:22:58] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:22:58] CRITICAL : Failed to apply patch: patching file test/unit/api_spec.js
patch unexpectedly ends in middle of line
patch: **** malformed patch at line 28:  


[2025-07-31 19:22:58] WARNING  : Stopping and removing container...
[2025-07-31 19:23:09] SUCCESS  : Container stopped and removed
[2025-07-31 19:23:09] INFO     : Environment ready â€“ preparation skipped
[2025-07-31 19:23:09] MARKER   : Attempt 4 with model deepseek-r1-distill-llama-70b
[2025-07-31 19:23:09] MARKER   : =============== Test Generation Started ==============
[2025-07-31 19:23:09] INFO     : Querying LLM...
[2025-07-31 19:23:13] INFO     : HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-31 19:23:13] SUCCESS  : LLM response received
[2025-07-31 19:23:13] MARKER   : Running test in pre-PR codebase...
[2025-07-31 19:23:13] INFO     : Creating container...
[2025-07-31 19:23:15] SUCCESS  : Container 014fbb9e8585 started
[2025-07-31 19:23:15] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:23:16] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-31 19:23:16] INFO     : Running test command...
[2025-07-31 19:23:47] SUCCESS  : Test command executed
[2025-07-31 19:23:47] FAIL     : Test evaluated as failed
[2025-07-31 19:23:47] WARNING  : Stopping and removing container...
[2025-07-31 19:23:58] SUCCESS  : Container stopped and removed
[2025-07-31 19:23:58] MARKER   : Running test in post-PR codebase...
[2025-07-31 19:23:58] INFO     : Creating container...
[2025-07-31 19:24:00] SUCCESS  : Container 90d9cfe5c946 started
[2025-07-31 19:24:00] SUCCESS  : File test_patch.diff added to container successfully
[2025-07-31 19:24:00] SUCCESS  : Patch file test_patch.diff applied successfully
[2025-07-31 19:24:00] SUCCESS  : File golden_code_patch.diff added to container successfully
[2025-07-31 19:24:00] SUCCESS  : Patch file golden_code_patch.diff applied successfully
[2025-07-31 19:24:00] INFO     : Running test command...
[2025-07-31 19:24:31] SUCCESS  : Test command executed
[2025-07-31 19:24:31] INFO     : Test evaluated as passed
[2025-07-31 19:24:31] WARNING  : Stopping and removing container...
[2025-07-31 19:24:42] SUCCESS  : Container stopped and removed
[2025-07-31 19:24:42] SUCCESS  : Fail-to-Pass test generated
[2025-07-31 19:24:42] SUCCESS  : Suggested test for PR:


Hi! ðŸ¤– The test below is automatically generated and serves as a regression test for this PR because it:
- passes in the new codebase after the PR, and
- fails in the old codebase before the PR.

```javascript
it("should correctly map Cyrillic characters in standard fonts", async () => {
  const { getGlyphMapForStandardFonts } = await import("../../src/core/standard_fonts.js");
  const glyphMap = getGlyphMapForStandardFonts();

  // The expected mappings for Cyrillic characters added in the patch
  const expectedMappings = {
    570: 1040, 571: 1041, 572: 1042, 573: 1043, 574: 1044,
    575: 1045, 576: 1046, 577: 1047, 578: 1048, 579: 1049,
    580: 1050, 581: 1051, 582: 1052, 583: 1053, 584: 1054,
    585: 1055, 586: 1056, 587: 1057, 588: 1058, 589: 1059,
    590: 1060, 591: 1061, 592: 1062, 593: 1063, 594: 1064,
    595: 1065, 596: 1066, 597: 1067, 598: 1068, 599: 1069,
    600: 1070
  };

  for (const [cid, expectedUnicode] of Object.entries(expectedMappings)) {
    const actualUnicode = glyphMap[parseInt(cid)];
    expect(actualUnicode).toBe(expectedUnicode);
  }
});
```

If you find this regression test useful, feel free to insert it to your test suite.
Our automated pipeline inserted the test in the `test/unit/api_spec.js` file before running it.

This is part of our research at the [ZEST](https://www.ifi.uzh.ch/en/zest.html) group of University of Zurich in collaboration with [Mozilla](https://www.mozilla.org).
If you have any suggestions, questions, or simply want to learn more, feel free to contact us at konstantinos.kitsios@uzh.ch and mcastelluccio@mozilla.com.

[2025-07-31 19:24:42] MARKER   : =============== Test Generation Finished =============
[2025-07-31 19:24:42] SUCCESS  : Attempt 4 with model deepseek-r1-distill-llama-70b finished successfully
[2025-07-31 19:24:42] SUCCESS  : Test file copied to generated_tests/pdf_js_19562_i4_deepseek-r1-distill-llama-70b.txt
[2025-07-31 19:24:42] MARKER   : =============== Finished Payload #19562 ==============
[2025-07-31 19:24:42] SUCCESS  : Directory tmp_repo_dir_mozilla__pdf.js-19562 removed successfully
[2025-07-31 19:24:44] SUCCESS  : Removed Docker image 'image_mozilla__pdf.js-19562'

it("should handle missing navigatorplatform without error", async () => {
  const { FeatureTest } = await import("../../src/shared/util.js");

  // Mock navigator to be undefined
  const navigatorStub = sinon.stub(global, "navigator", undefined);

  try {
    const platform = await FeatureTest.platform;
    expect(platform.isMac).toBe(false);
  } finally {
    navigatorStub.restore();
  }

  // Mock navigator with platform not being a string
  const navigatorPlatformStub = sinon.stub(global, "navigator");
  navigatorPlatformStub.platform = null;

  try {
    const platform = await FeatureTest.platform;
    expect(platform.isMac).toBe(false);
  } finally {
    navigatorPlatformStub.restore();
  }
});
it("should render text correctly when font file is missing and browserdisplayusedocumentfonts is set to", async () => {
  const { PDFDocument } = await import("../../src/display/api.js");
  const { PDFPage } = await import("../../src/display/api.js");
  const pdfUrl = "https://www.jma.go.jp/jma/press/2507/04a/20250704_asosan.pdf";
  const pdf = await PDFDocument.load(pdfUrl);
  const page = await pdf.getPage(1);
  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");
  const renderTask = page.render({
    canvasContext: ctx,
    viewport: page.getViewport({ scale: 1 }),
  });
  await renderTask.promise;
  const expectedText = "Example Text";
  const actualText = ctx.canvas.toDataURL();
  const expectedCanvas = document.createElement("canvas");
  const expectedCtx = expectedCanvas.getContext("2d");
  expectedCtx.font = "16px Arial";
  expectedCtx.textBaseline = "top";
  expectedCtx.fillText(expectedText, 0, 0);
  const expectedDataUrl = expectedCanvas.toDataURL();
  expect(actualText).not.toBe(expectedDataUrl);
});
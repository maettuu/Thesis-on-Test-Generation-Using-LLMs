it("should handle base href correctly in filter URLs", async () => {
  const { DOMFilterFactory } = await import("../../src/display/display_utils.js");
  const { Util } = await import("../../src/shared/util.js");

  // Simulate the presence of a base href
  const originalBaseURI = document.baseURI;
  document.baseURI = "http://example.com/";

  const factory = new DOMFilterFactory();
  const filter = {
    transferMap: {
      red: [0, 1],
      green: [0, 1],
      blue: [0, 1],
    },
  };

  const url = await factory.addFilter(filter);

  // The URL should include the base href followed by the fragment
  const expectedUrl = "url(http://example.com/#g_1_transfer_map_1)";
  assert.strictEqual(url, expectedUrl);

  // Restore original baseURI
  document.baseURI = originalBaseURI;
});
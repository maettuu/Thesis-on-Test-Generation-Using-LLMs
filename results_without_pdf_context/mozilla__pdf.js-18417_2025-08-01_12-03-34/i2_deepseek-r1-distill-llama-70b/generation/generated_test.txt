it("should create absolute filter URLs when base element is present", async () => {
  const { DOMFilterFactory } = await import("../../src/display/display_utils.js");
  const { Util } = await import("../../src/shared/util.js");

  // Mock document with <base> element
  const mockDocument = {
    baseURI: "http://example.com/",
    URL: "http://example.com/",
    baseURI: "http://example.com/",
    getElementsByTagName: () => [
      { href: "." }
    ]
  };

  const factory = new DOMFilterFactory({ ownerDocument: mockDocument });
  const filter = await factory.addFilter([0, 255]);

  expect(filter).toMatch(/^http:\/\/example\.com\/#/);
});
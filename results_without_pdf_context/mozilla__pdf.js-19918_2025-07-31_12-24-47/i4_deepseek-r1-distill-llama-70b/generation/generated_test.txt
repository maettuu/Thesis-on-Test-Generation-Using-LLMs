it("should support decoding cmyk jpeg image in using ImageDecoder", async () => {
  const { JpegImage } = await import("../../src/core/jpg.js");
  const { JpegStream } = await import("../../src/core/jpeg_stream.js");

  // Create a minimal CMYK JPEG buffer
  const cmykJpegBuffer = new Uint8Array([
    0xFF, 0xD8, 0xFF, 0xEE, 0x00, 0x16, 0x43, 0x6D, 0x43, 0x6C, 0x00, 0x00,
    0x80, 0x00, 0x02, 0x11, 0x0C, 0x6C, 0x6D, 0x42, 0x43, 0x00, 0x5F,
    0x00, 0x04, 0x01, 0x00, 0x00, 0x7F, 0x00, 0xC2, 0x00, 0x02, 0x00,
    0x11, 0x8C, 0x6C, 0x6C, 0x1A, 0x87, 0x6F, 0x02, 0x02, 0x02, 0x02,
    0x02, 0x02, 0x02, 0x02, 0x02, 0xFF, 0xD9
  ]);

  const jpegImage = new JpegImage({ colorTransform: 1 });
  const useImageDecoder = await JpegImage.canUseImageDecoder(cmykJpegBuffer);

  const expected = { cmyk: true };
  expect(useImageDecoder).toEqual(expected);
});
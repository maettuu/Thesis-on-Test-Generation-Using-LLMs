it("should support decoding cmyk jpeg image using ImageDecoder", async () => {
  const { JpegStream } = await import("../../src/core/jpeg_stream.js");
  const { JpegImage } = await import("../../src/core/jpg.js");
  const data = new Uint8Array([0xff, 0xd8, 0xff, 0xe0, 0x00, 0x10, 0x4a, 0x46, 0x49, 0x46, 0x00, 0x01, 0x01, 0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00]);
  const stream = { dict: {}, getBytes: () => data };
  const jpegStream = new JpegStream(stream, null, {});
  const useImageDecoder = await JpegImage.canUseImageDecoder(data);
  const imageDecoderSupported = await JpegStream.canUseImageDecoderCMYK();
  if (imageDecoderSupported && useImageDecoder) {
    const decoder = new (await import("../../src/shared/util.js")).ImageDecoder({
      data: data,
      type: "image/x-jpeg-pdf",
      preferAnimation: false,
    });
    const image = await decoder.decode();
    expect(image).not.toBeNull();
  } else {
    expect(useImageDecoder).toBeNull();
  }
});
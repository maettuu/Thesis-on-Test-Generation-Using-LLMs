it("should correctly handle noninteger DW in font descriptor", async () => {
  const { Dict, Name, PartialEvaluator, XRefMock } = await import("./test_utils.js");

  const xref = new XRefMock();
  const fontDict = Dict.from({
    Type: Name.get("Font"),
    Subtype: Name.get("Type1"),
    BaseFont: Name.get("Helvetica"),
    DW: 500.5
  });

  xref.put(1, fontDict);

  const evaluator = new PartialEvaluator({
    xref,
    handler: {},
    pageIndex: 0,
    idFactory: createIdFactory(),
    fontCache: {},
    builtInCMapCache: {},
    standardFontDataCache: {},
    globalImageCache: {},
    systemFontCache: {},
    options: {}
  });

  const properties = {
    composite: true,
    vertical: false,
    firstChar: 0
  };

  evaluator.extractWidths(fontDict, {}, properties);

  expect(properties.defaultWidth).toBe(501);
});
it("should correctly update the generation number in the xref table", async () => {
  const { XRef } = await import("../../src/core/xref.js");
  const { Ref } = await import("../../src/core/primitives.js");

  const xref = new XRef(null, null);
  xref.entries = [
    { offset: 100, gen: 0, uncompressed: true },
    { offset: 200, gen: 1, uncompressed: true },
  ];

  const ref = Ref.get(1, 0);
  const xrefEntry = xref.fetchUncompressed(ref, xref.entries[1]);

  const expectedGen = 0;
  const actualGen = xref.entries[1].gen;

  expect(actualGen).toBe(expectedGen);
});
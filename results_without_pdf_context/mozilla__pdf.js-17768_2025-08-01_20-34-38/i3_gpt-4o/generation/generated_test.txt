it("should record methodOfCreation as maintoolbar for free highlights", async () => {
  const {
    loadAndWait,
    getFirstSerialized,
  } = await import("./test_utils.mjs");
  // Load a simple PDF that contains at least one page.
  const page = await loadAndWait("trivial.pdf");
  // Simulate a free highlight creation by drawing on the page.
  // Pick a starting point and an ending point within the page area.
  await page.mouse.move(150, 150);
  await page.mouse.down();
  await page.mouse.move(250, 150);
  await page.mouse.up();
  // Wait a moment for the annotation to be processed and serialized.
  const annotation = await getFirstSerialized(page);
  if (annotation.methodOfCreation !== "main_toolbar") {
    throw new Error(
      "Expected free highlight annotation to have methodOfCreation 'main_toolbar' but got: " +
        annotation.methodOfCreation
    );
  }
});

it("should throw JpxError with OpenJPEG message when decode fails", async () => {
  const { JpxImage } = await import("../../src/core/jpx.js");
  const { JpxError } = await import("../../src/core/jpx.js");

  const data = Buffer.alloc(0);
  const error = new JpxError("OpenJPEG: Unknown format");

  try {
    await JpxImage.decode(data, false);
    throw new Error("Expected JpxError to be thrown");
  } catch (e) {
    if (e instanceof JpxError) {
      expect(e.message).toBe("OpenJPEG: Unknown format");
    } else {
      throw e;
    }
  }
});
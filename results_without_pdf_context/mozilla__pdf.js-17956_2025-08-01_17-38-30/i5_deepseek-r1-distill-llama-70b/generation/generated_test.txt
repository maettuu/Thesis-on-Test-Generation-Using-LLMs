it("should not log OpenJPEG errors when decoding invalid JPX", async () => {
  const { JpxImage } = await import("../../src/core/jpx.js");
  const { TestReporter } = await import("./testreporter.js");

  const reporter = new TestReporter();
  let errorLogged = false;
  const originalConsoleError = console.error;

  console.error = (message) => {
    if (message.includes("OpenJPEG: Unknown format")) {
      errorLogged = true;
    }
    originalConsoleError(message);
  };

  try {
    await JpxImage.decode(Buffer.alloc(0), false);
  } catch (error) {
    if (error instanceof JpxImage.JpxError) {
      // Expected error, but we check for the logs
    }
  }

  assert.equal(errorLogged, false);
});
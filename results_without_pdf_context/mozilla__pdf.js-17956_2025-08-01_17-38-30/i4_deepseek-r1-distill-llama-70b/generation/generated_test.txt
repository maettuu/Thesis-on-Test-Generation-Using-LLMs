it("should throw specific error message when decoding invalid JPX", async () => {
  const { JpxImage } = await import("../../src/core/jpx.js");
  const invalidJpxData = new Uint8Array([0x00, 0x00, 0x00, 0x00]); // Invalid JPX data

  try {
    await JpxImage.decode(invalidJpxData, false);
    throw new Error("Expected JpxError to be thrown");
  } catch (error) {
    if (error instanceof JpxError) {
      const expectedMessage = "Unknown format";
      expect(error.message).toBe(`JPX error: ${expectedMessage}`);
    } else {
      throw error;
    }
  }
});
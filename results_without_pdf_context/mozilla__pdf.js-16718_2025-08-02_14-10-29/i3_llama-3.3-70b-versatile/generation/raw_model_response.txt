```javascript
it("should save PDF annotations correctly", async () => {
  const { WorkerMessageHandler, LocalPdfManager, AnnotationFactory } = await import("../../src/core/worker.js");
  const { incrementalUpdate } = await import("../../src/core/writer.js");
  const { XRef } = await import("../../src/core/xref.js");
  const { Dict, Ref } = await import("../../src/core/primitives.js");
  const { stringToBytes } = await import("../../src/shared/util.js");
  const { StringStream } = await import("../../src/core/stream.js");

  const pdfManager = new LocalPdfManager({
    source: stringToBytes("%PDF-1.4\n" + "1 0 obj\n" + "<<\n" + "/Type /Catalog\n" + "/Pages 2 0 R\n" + ">>\n" + "endobj\n" + "2 0 obj\n" + "<<\n" + "/Type /Pages\n" + "/Kids [3 0 R]\n" + "/Count 1\n" + "/MediaBox [0 0 100 100]\n" + ">>\n" + "endobj\n" + "3 0 obj\n" + "<<\n" + "/Type /Page\n" + "/Parent 2 0 R\n" + "/Resources <<\n" + "/Font <<\n" + "/F1 4 0 R\n" + ">>\n" + ">>\n" + "/Contents 5 0 R\n" + ">>\n" + "endobj\n" + "4 0 obj\n" + "<<\n" + "/Type /Font\n" + "/Subtype /Type1\n" + "/BaseFont /Helvetica\n" + ">>\n" + "endobj\n" + "5 0 obj\n" + "<<\n" + "/Length 6 0 R\n" + ">>\n" + "stream\n" + "BT\n" + "/F1 12 Tf\n" + "100 100 Td\n" + "(Hello World) Tj\n" + "ET\n" + "endstream\n" + "endobj\n" + "6 0 obj\n" + "23\n" + "endobj\n" + "xref\n" + "0 7\n" + "0000000000 65535 f \n" + "0000000015 00000 n \n" + "0000000074 00000 n \n" + "0000000121 00000 n \n" + "0000000170 00000 n \n" + "0000000219 00000 n \n" + "0000000238 00000 n \n" + "trailer\n" + "<<\n" + "/Size 7\n" + "/Root 1 0 R\n" + ">>\n" + "startxref\n" + "264\n" + "%%EOF"),
    disableAutoFetch: true,
  });

  const xref = new XRef(new StringStream(pdfManager.source), pdfManager);
  xref.parse();

  const annotationStorage = new Map();
  annotationStorage.set(0, [{ page: 0, annotation:
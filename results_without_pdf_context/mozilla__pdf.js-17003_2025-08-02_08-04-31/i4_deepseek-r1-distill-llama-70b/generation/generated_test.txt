it("should not warn about unknown field name when collectFields is true", async () => {
  const { AnnotationFactory } = await import("../../src/core/annotation.js");
  const { warn } = await import("../../shared/util.js");

  // Mock the warn function
  const mockWarn = jest.spyOn(util, "warn").mockImplementation(() => {});

  // Create a mock annotation dictionary
  const dict = {
    get: (key) => {
      if (key === "P") return new Ref();
      return null;
    },
  };

  // Create annotation with collectFields: true
  const annotation = await AnnotationFactory.create(
    null,
    null,
    null,
    null,
    true, // collectFields
    null
  );

  // Verify no warning was emitted
  expect(mockWarn).not.toHaveBeenCalledWith(
    "Unknown field name, falling back to empty field name."
  );

  mockWarn.mockRestore();
});
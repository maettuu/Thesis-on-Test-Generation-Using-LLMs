it("should handle touch end without errors when touchMoveAC is null", async () => {
  const { TouchManager } = await import("../../src/display/touch_manager.js");
  const container = document.createElement("div");
  const touchManager = new TouchManager({ container, signal: new AbortController().signal });

  // Simulate touchstart to initialize touchMoveAC
  const touchStartEvent = new TouchEvent("touchstart", { touches: [new Touch({ identifier: 1, target: container })] });
  container.dispatchEvent(touchStartEvent);

  // Manually set #touchMoveAC to null to simulate the bug
  touchManager.#touchMoveAC = null;

  // Simulate touchend event
  const touchEndEvent = new TouchEvent("touchend", { touches: [] });
  let errorOccurred = false;
  try {
    container.dispatchEvent(touchEndEvent);
  } catch (error) {
    errorOccurred = true;
  }

  expect(errorOccurred).toBe(false);
});
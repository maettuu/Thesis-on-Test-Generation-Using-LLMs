it("should correctly handle RC encryption with bit key", async () => {
  const { PDFDocument, PDFDocumentLoadingTask } = await import("../../src/display/api.js");
  const { ARCFourCipher } = await import("../../src/core/crypto.js");
  const { TestPdfsServer } = await import("./test_utils.js");

  // Create a test PDF with RC4 encryption (R=4, V=4) using a 40-bit key
  const server = new TestPdfsServer();
  const pdfData = await server.generateRC4EncryptedPDF(40);

  try {
    const loadingTask = new PDFDocumentLoadingTask(pdfData);
    const pdf = await PDFDocument.load(loadingTask);

    // If we reach here, the PDF was successfully decrypted and loaded
    expect(pdf.numPages).toBeGreaterThan(0);
  } catch (error) {
    // If the decryption fails, the PDF couldn't be loaded
    expect(error).not.toBeDefined();
  }
});
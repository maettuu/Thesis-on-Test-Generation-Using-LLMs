it("should display FreeText annotation with popup data", async () => {
  const { AnnotationElement, FreeTextAnnotationElement } = await import("../../src/display/annotation_layer.js");
  const data = {
    data: {
      textContent: ["Test content"],
      popupRef: null,
      titleObj: { str: "Test title" },
      contentsObj: { str: "Test contents" },
      richText: { str: "Test rich text" }
    },
    layer: {},
    linkService: {},
    downloadManager: {},
    imageResourcesPath: "",
    renderForms: true,
    svgFactory: {},
    annotationStorage: {},
    enableScripting: false,
    hasJSActions: false,
    fieldObjects: {},
    parent: {}
  };

  const createPopupMock = jest.fn();
  const element = new FreeTextAnnotationElement(data);
  element._createPopup = createPopupMock;

  const container = element.render();

  expect(container).not.toBeNull();
  expect(createPopupMock).toHaveBeenCalled();
});
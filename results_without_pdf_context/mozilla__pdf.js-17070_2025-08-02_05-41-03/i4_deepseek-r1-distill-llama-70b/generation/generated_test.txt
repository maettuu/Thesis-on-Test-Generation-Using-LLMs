it("should render comment annotations in PDFs", async () => {
  const { PDFDocument } = await import("pdf-lib");
  const { createPDFViewer } = await import("../../web/pdf_viewer.js");
  const { TextLayerRenderTask } = await import("../../web/text_layer.js");
  const { TestReporter } = await import("./testreporter.js");

  // Create a test PDF with a text annotation
  const pdfDoc = new PDFDocument();
  const page = pdfDoc.addPage();
  const annotation = new PDFAnnotation().setText("Test comment");
  page.addAnnotation(annotation);

  // Load the PDF document
  const pdfViewer = createPDFViewer({
    container: document.createElement("div"),
    viewer: document.createElement("div"),
  });
  const pdf = await PDFDocument.load(pdfDoc);
  const pageView = pdfViewer.openPDF(pdf);

  // Render the page
  await pageView.render();
  const textLayer = new TextLayerRenderTask(pageView);
  const text = await textLayer.getText();

  // Verify the annotation text is rendered
  expect(text).toContain("Test comment");
});
it("should apply fillalpha to file attachment annotation icons", async () => {
  const { FileAttachmentAnnotation } = await import("../../src/core/annotation.js");
  const { FileAttachmentAnnotationElement } = await import("../../src/display/annotation_layer.js");
  const { Util } = await import("../../shared/util.js");

  // Create a sample annotation with fillAlpha set to 0.5
  const annotation = new FileAttachmentAnnotation({
    dict: {
      get: (key) => {
        if (key === "FS") return new Name("PushPin");
        if (key === "CA") return 0.5;
        return undefined;
      }
    },
    xref: {}
  });

  // Render the annotation
  const element = new FileAttachmentAnnotationElement({
    annotation,
    page: {},
    imageResourcesPath: "",
    linkService: {}
  });
  element.render();

  // Check if the opacity is correctly applied
  const expectedOpacity = 0.5;
  const actualOpacity = Number(element.#trigger.style.opacity.match(/\d+/)[0]) / 100;

  expect(actualOpacity).toBe(expectedOpacity);
});
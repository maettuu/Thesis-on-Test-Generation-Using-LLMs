it("should display top and bottom images in pdf file", async () => {
  const { PDFDocument } = await import("../../src/core/document.js");
  const { PartialEvaluator } = await import("../../src/core/evaluator.js");
  const { OperatorList } = await import("../../src/core/operator_list.js");
  const { TestPdfsServer } = await import("./test_utils.js");

  const server = new TestPdfsServer();
  const pdf = await PDFDocument.load(server.crossOriginUrl("issue-pdf.pdf"));
  const page = pdf.getPage(1);
  const evaluator = new PartialEvaluator();
  const operatorList = new OperatorList();

  await page.render({
    canvasContext: null,
    viewport: page.getViewport({ scale: 1 }),
    renderInteractive: false,
    evaluator,
    operatorList,
  });

  const expectedOps = [
    "save",
    "setGState",
    "beginMarkedContentProps",
    "paintImageXObject",
    "endMarkedContent",
    "restore",
  ];

  const actualOps = operatorList.ops.map((op) => op.fn);

  expect(actualOps).toEqual(expect.arrayContaining(expectedOps));
});
it("should correctly render GillSansMT fonts as Helvetica", async () => {
  const { createTemporaryNodeServer } = await import("./test_utils.js");
  const { getDocument } = await import("../../src/display/api.js");

  const server = createTemporaryNodeServer({
    pdf: `${TEST_PDFS_PATH}/gill-sans-test.pdf`
  });

  try {
    const loadingTask = getDocument({
      url: server.url,
      cMapUrl: CMAP_URL,
      workerSrc: WORKER_SRC
    });

    const pdfDocument = await loadingTask.promise;
    const pdfPage = await pdfDocument.getPage(1);
    const pageViewport = new PageViewport(pdfPage, 1);

    const renderTask = pdfPage.render({
      viewport: pageViewport,
      textLayer: true
    });

    const textContent = await renderTask.promise.then(() => pdfPage.getTextContent());
    const expectedText = "Hello World";

    assert.strictEqual(textContent.items[0].str, expectedText);
  } finally {
    server.close();
  }
});
it("should render all inline images correctly", async () => {
  const { PDFDocument } = await import("../../src/display/api.js");
  const { PDFPageProxy } = await import("../../src/display/pdf_page.js");
  const { TestReporter } = await import("./testreporter.js");

  const reporter = new TestReporter();
  const pdf = await PDFDocument.load(
    fetch("image1.pdf"),
    { 
      onProgress: (progress) => reporter.onProgress(progress),
      password: null,
      cMapLoader: null,
      fontLoader: null
    }
  );

  const page = await pdf.getPage(2);
  const pageProxy = new PDFPageProxy(page);

  await pageProxy.run();
  const operatorList = pageProxy.getOperatorList();
  const expectedImageCount = 2;

  expect(operatorList.getImages().length).toBe(expectedImageCount);
});
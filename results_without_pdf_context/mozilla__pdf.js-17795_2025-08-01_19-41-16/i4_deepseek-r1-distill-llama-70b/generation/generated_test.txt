it("should render all images in PDF with inlined images without closing EI", async () => {
  const { PDFDocument } = await import("../../web/pdf_document.js");
  const { JSDOM } = await import("jsdom");
  const pdfBytes = await fetch("image1.pdf").then(res => res.arrayBuffer());
  const pdf = await PDFDocument.load(pdfBytes, { cMapUrl: "/web/cmaps/" });
  const page = await pdf.getPage(1);
  const viewport = page.getViewport({ scale: 1 });
  const renderOptions = {
    canvasContext: new (await import("canvas")).Canvas(),
    viewport,
    enableWebGL: false,
  };
  const result = await page.render(renderOptions);
  const svg = await result.getSvg();
  const dom = new JSDOM(svg);
  const images = dom.window.document.querySelectorAll("image");
  expect(images.length).toBe(2);
});
it("should apply transform correctly to pdf paint commands", async () => {
  const { Util } = await import("../../src/shared/util.js");
  const { Commands } = await import("../../src/core/font_renderer.js");
  const { OperatorList } = await import("../../src/core/operator_list.js");

  const cmds = new Commands();
  const args = [10, 20, 30, 40];
  const transform = [1, 0, 0, 1, 0, 0];

  cmds.add("test", args);
  const expected = [10, 20, 30, 40].map((val, index) => {
    if (index % 2 === 0) {
      return val * transform[0] + args[index + 1] * transform[2] + transform[4];
    } else {
      return val * transform[1] + args[index - 1] * transform[3] + transform[5];
    }
  });

  const opList = new OperatorList();
  opList.addState(0, [10, 20, 30, 40], transform);
  const actual = opList.buffer;

  Util.applyTransform(args, transform);
  expect(args).toEqual(expected);
  expect(actual).toEqual(expected);
});
it("should render emojis in FreeTextAnnotations correctly", async () => {
  const { FreeTextAnnotation } = await import("../../src/core/annotation.js");
  const { Dict } = await import("../../src/core/primitives.js");
  const { stringToUTF8String } = await import("../../src/shared/util.js");

  const xref = new XRefMock([]);
  const dict = new Dict(xref);
  dict.set("Subtype", Name.get("FreeText"));
  dict.set("Contents", stringToUTF8String("Hello, world! üåç"));

  const annotation = new FreeTextAnnotation({
    dict,
    xref,
    annotationGlobals: { acroForm: Dict.empty },
    evaluatorOptions: { isOffscreenCanvasSupported: true },
  });

  const expected = "Hello, world! üåç";
  const actual = annotation.data.textContent.join(" ");
  expect(actual).toEqual(expected);
});
it("should render emojis correctly in PDFs", async () => {
  const { FreeTextAnnotation } = await import("../../src/core/annotation.js");
  const { Dict, Ref } = await import("../../src/core/primitives.js");
  const { StringStream } = await import("../../src/core/stream.js");

  const xref = {
    getNewPersistentRef: (obj) => new Ref(1, 0),
  };

  const params = {
    dict: new Dict(),
    xref,
    evaluatorOptions: {},
    data: {
      defaultAppearanceData: {},
      noHTML: true,
    },
    rectangle: [0, 0, 100, 100],
    rotation: 0,
    _contents: new StringStream("Hello üåç"),
  };

  const annotation = new FreeTextAnnotation(params);
  const expectedAppearance = annotation.appearance;

  params._contents = new StringStream("Hello üåç");
  const newAnnotation = new FreeTextAnnotation(params);
  const actualAppearance = newAnnotation.appearance;

  expect(actualAppearance).toEqual(expectedAppearance);
});
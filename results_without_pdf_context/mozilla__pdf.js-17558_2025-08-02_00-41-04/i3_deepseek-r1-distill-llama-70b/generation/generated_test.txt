it("should correctly render emojis in annotations", async () => {
  const xref = new XRefMock();
  const idFactory = createIdFactory();

  const annotationDict = new Dict(xref);
  annotationDict.set("Subtype", Name.get("FreeText"));
  annotationDict.set("Contents", "ğŸ‘‹ğŸ¼ Hello, World!");
  annotationDict.set("Rect", [0, 0, 100, 100]);

  const params = {
    dict: annotationDict,
    xref,
    annotationGlobals: {
      pdfManager: {
        ensureCatalog: () => Promise.resolve({}),
      },
    },
    evaluatorOptions: {
      isOffscreenCanvasSupported: true,
    },
  };

  const annotation = await AnnotationFactory.create(params);
  const appearanceStream = annotation.appearance;

  const expectedOutput = "ğŸ‘‹ğŸ¼ Hello, World!";
  const actualOutput = await parseAppearanceStream(appearanceStream, {}, xref);

  expect(actualOutput.textContent).toContain(expectedOutput);
});
it("should render emojis in PDFs", async () => {
  const { PDFDocument } = await import("pdf-lib");
  const { PDFDocument as PDFJSDocument } = await import("../../web/pdf_document.js");

  // Create a PDF with an emoji
  const pdfDoc = new PDFDocument();
  const page = pdfDoc.addPage();
  const gfx = page.getGfx();
  gfx.beginText();
  gfx.setFontSize(24);
  gfx.showText("ðŸ‘»");
  gfx.endText();

  // Save the PDF to a buffer
  const pdfBuffer = await pdfDoc.toBuffer();

  // Load the PDF using pdf.js
  const pdf = await PDFJSDocument.load({ data: pdfBuffer });

  // Render the first page and get the text content
  const pagePromise = pdf.getPage(1);
  const { textContent } = await pagePromise.then(page => {
    return page.getTextContent().then(text => {
      return { textContent: text.items.map(item => item.str).join("") };
    });
  });

  // The emoji should be rendered as the Unicode character
  expect(pagePromise.textContent).toContain("ðŸ‘»");
});
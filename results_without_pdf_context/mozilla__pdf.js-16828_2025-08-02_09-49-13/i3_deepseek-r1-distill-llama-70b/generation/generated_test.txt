it("should allow pasting an image from clipboard", async () => {
  const { AnnotationEditorUIManager } = await import("../../src/display/editor/tools.js");
  const { AnnotationEditorLayer } = await import("../../src/display/editor/annotation_editor_layer.js");
  const { StampEditor } = await import("../../src/display/editor/stamp.js");

  const container = document.createElement("div");
  const uiManager = new AnnotationEditorUIManager(container, null, null, null, null);
  const layer = new AnnotationEditorLayer({
    uiManager: uiManager,
    div: container,
    pageIndex: 0,
    l10n: {},
    viewport: {},
    annotationLayer: null,
  });

  const clipboardData = {
    types: ["image/png"],
    items: [
      {
        type: "image/png",
        getAsFile: () => new File(["test"], "test.png", { type: "image/png" }),
      },
    ],
  };

  const event = { clipboardData };

  uiManager.paste(event);

  await new Promise(resolve => setTimeout(resolve, 100));

  const allEditors = uiManager.getEditors(0);
  expect(allEditors.length).toBe(1);
  const editor = allEditors[0];
  expect(editor).toBeInstanceOf(StampEditor);
  expect(editor.isEmpty()).toBe(false);
});
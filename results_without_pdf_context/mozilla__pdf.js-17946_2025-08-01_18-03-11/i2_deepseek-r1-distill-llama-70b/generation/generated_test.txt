it("should render large JPX images", async () => {
  const { PDFDocument, PDFPage } = await import("../../src/display/api.js");
  const examplePdf = await fetch("https://github.com/mozilla/pdf.js/files/13391396/example.pdf");
  const pdf = await PDFDocument.load(await examplePdf.blob());
  const page = await pdf.getPage(1);
  const viewport = page.getViewport({ scale: 1 });
  const canvas = document.createElement("canvas");
  canvas.width = viewport.width;
  canvas.height = viewport.height;
  const renderTask = page.render({
    canvasContext: canvas.getContext("2d"),
    viewport,
  });
  await renderTask.promise;
  const ctx = canvas.getContext("2d");
  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
  const data = imageData.data;
  const hasImage = data.some((value) => value < 255);
  expect(hasImage).toBe(true);
});
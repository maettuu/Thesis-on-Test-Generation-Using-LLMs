it("should adjust font family for Windows Firefox", async () => {
  const { TextLayer } = await import("../../src/display/text_layer.js");
  const { FeatureTest } = await import("../../shared/util.js");

  // Mock platform and browser detection
  const originalPlatform = FeatureTest.platform;
  FeatureTest.platform = () => ({
    isWindows: true,
    isFirefox: true,
  });

  // Test sans-serif font family
  {
    const textLayer = new TextLayer();
    const fontFamily = "sans-serif";
    const expectedFontFamily = "Calibri, sans-serif";
    const actualFontFamily = TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;
    expect(actualFontFamily).toBe(expectedFontFamily);
  }

  // Test monospace font family
  {
    const textLayer = new TextLayer();
    const fontFamily = "monospace";
    const expectedFontFamily = "Lucida Console, monospace";
    const actualFontFamily = TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;
    expect(actualFontFamily).toBe(expectedFontFamily);
  }

  // Restore original platform detection
  FeatureTest.platform = originalPlatform;
});
it("should render text layer with correct font family on Windows and Firefox", async () => {
  const { TextLayer, PageViewport, setLayerDimensions } = await import("../../src/display/text_layer.js");
  const { PDFDocument, Page } = await import("../../src/core/document.js");
  const { Util } = await import("../../src/shared/util.js");
  const { FeatureTest } = await import("../../src/shared/util.js");

  const pdfDocument = await PDFDocument.load(await Util.fetch("path_to_test_pdf.pdf"));
  const pdfPage = pdfDocument.getPage(1);
  const viewport = pdfPage.getViewport({ scale: 1 });
  const textLayer = new TextLayer({
    textContent: await pdfPage.getTextContent(),
    viewport: viewport,
    div: document.createElement("div"),
    eventBus: Util.createEventBus(),
  });

  const isWindows = FeatureTest.platform.isWindows;
  const isFirefox = FeatureTest.platform.isFirefox;

  const expectedFontFamily = isWindows && isFirefox ? "Calibri, sans-serif" : "sans-serif";
  const actualFontFamily = TextLayer.fontFamilyMap.get("sans-serif");

  expect(actualFontFamily).toBe(expectedFontFamily);
});
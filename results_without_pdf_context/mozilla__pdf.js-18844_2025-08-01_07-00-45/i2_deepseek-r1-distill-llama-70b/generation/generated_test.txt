it("should use Calibri and Lucida Console on Windows Firefox", async () => {
  const { TextLayer } = await import("../../src/display/text_layer.js");
  const { FeatureTest } = await import("../../shared/util.js");

  // Mock platform detection to simulate Windows and Firefox
  jest.spyOn(FeatureTest, "platform").mockReturnValue({
    isWindows: true,
    isFirefox: true,
  });

  // Create a test text layer with sample content
  const textContent = { items: [{ str: "Test", fontName: "sans-serif" }] };
  const textLayer = new TextLayer({
    textContentSource: textContent,
    container: document.createElement("div"),
    viewport: { scale: 1, rotation: 0, rawDims: {} },
  });

  // Check if the expected fonts are being used
  const textDiv = textLayer.#textDivs[0];
  const expectedSansSerif = "Calibri, sans-serif";
  const expectedMonospace = "Lucida Console, monospace";

  expect(textDiv.style.fontFamily).toContain(expectedSansSerif);
});
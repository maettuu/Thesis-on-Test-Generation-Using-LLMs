```javascript
it("should match text layer and canvas font family on Windows with Firefox", async () => {
  const { TextLayer } = await import("../../src/display/text_layer.js");
  const { FeatureTest } = await import("../../src/shared/util.js");

  // Simulate Windows and Firefox environment
  FeatureTest.platform = { isWindows: true, isFirefox: true };

  const textLayer = new TextLayer();
  const style = { fontFamily: "sans-serif" };
  const expectedFontFamily = "Calibri, sans-serif";

  // Generate actual font family using the patched method
  let fontFamily = (textLayer.#fontInspectorEnabled && style.fontSubstitution) || style.fontFamily;
  fontFamily = TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;

  // Compare expected with actual
  expect(fontFamily).toBe(expectedFontFamily);
});
```
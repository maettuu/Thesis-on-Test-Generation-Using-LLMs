it("should improve poster PDF rendering performance by optimizing filter handling", async () => {
  const { resetCtxToDefault } = await import("../../src/display/canvas.js");

  // Create test canvases
  const canvasBefore = document.createElement('canvas');
  const ctxBefore = canvasBefore.getContext('2d');
  const canvasAfter = document.createElement('canvas');
  const ctxAfter = canvasAfter.getContext('2d');

  // Set up initial filter state
  ctxBefore.filter = "blur(5px)";
  ctxAfter.filter = "blur(5px)";

  // Define test function
  function testResetFilter(ctx) {
    const start = performance.now();
    resetCtxToDefault(ctx);
    return performance.now() - start;
  }

  // Measure execution time before patch
  const beforeTime = testResetFilter(ctxBefore);

  // Measure execution time after patch
  const afterTime = testResetFilter(ctxAfter);

  // Verify performance improvement
  expect(afterTime).to.be.lessThan(beforeTime);
});
it("should not uselessly change the filter when drawing", async () => {
  const { CanvasGraphics } = await import("../../src/display/canvas.js");
  const { DOMCanvasFactory } = await import("../../src/display/display_utils.js");
  const canvasFactory = new DOMCanvasFactory();
  const canvas = canvasFactory.createCanvas(100, 100);
  const ctx = canvas.getContext('2d');
  const graphics = new CanvasGraphics(ctx, {}, {}, canvasFactory, null, {}, {}, {});
  const originalFilter = ctx.filter;
  graphics.paintInlineImageXObject({ width: 10, height: 10, data: new Uint8ClampedArray(100) });
  const newFilter = ctx.filter;
  expect(newFilter).toBe(originalFilter);
});
it("should resize SVG images correctly after patch", async () => {
  const { PDFDocument, PDFPageProxy } = await import("../../src/display/api.js");
  const { ImageManager } = await import("../../src/display/editor/tools.js");

  // Create a test canvas and SVG
  const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>`;
  const canvas = new OffscreenCanvas(1, 1);
  const ctx = canvas.getContext("2d");
  const image = new Image();
  image.src = svg;

  // Draw the SVG on the canvas
  await image.decode();
  ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 1);

  // Check if the SVG was resized correctly
  const pixel = ctx.getImageData(0, 0, 1, 1).data;
  const isRed = pixel[0] === 255 && pixel[1] === 0 && pixel[2] === 0;

  // Verify the result
  return isRed;
});